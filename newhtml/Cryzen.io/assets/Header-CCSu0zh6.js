var _e=Object.defineProperty,ve=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ae=(n,s,l)=>s in n?_e(n,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[s]=l,ne=(n,s)=>{for(var l in s||(s={}))he.call(s,l)&&ae(n,l,s[l]);if(se)for(var l of se(s))ye.call(s,l)&&ae(n,l,s[l]);return n},oe=(n,s)=>ve(n,fe(s));var D=(n,s,l)=>new Promise((o,a)=>{var g=m=>{try{u(l.next(m))}catch(i){a(i)}},S=m=>{try{u(l.throw(m))}catch(i){a(i)}},u=m=>m.done?o(m.value):Promise.resolve(m.value).then(g,S);u((l=l.apply(n,s)).next())});import{_ as R,o as d,c as v,e as t,ab as ge,i as re,j as O,A as G,u as F,a1 as ce,a as X,U as we,v as N,a4 as le,K as E,aa as be,G as C,d as e,l as k,E as $,h as w,O as ke,t as y,F as T,f as xe,g as Se,w as U,H as Ne,J as Le,M as $e,p as j,q as J,ac as Ie,z as ie,k as Be,Y as Me,x as Ee,b as Ce,y as de,a9 as Re,n as V,r as He,L as Ae,C as De}from"./index-BszMCtG6.js";import{_ as ue}from"./AnimatedNumber-BYkgbvQq.js";import{_ as Ue}from"./LoadingElement-BTdqt7e_.js";import{_ as Ve}from"./TwoXRewards-CGaHQEO0.js";import{_ as Te}from"./ThreeDText-DWiM50LY.js";import{_ as Ge}from"./RewardCard-OyVjYOzE.js";import{_ as pe}from"./AccentNotify-B4gFNH6B.js";import{u as Fe,p as Ze}from"./useSearchParams-0sLksNgf.js";const Pe={},qe={class:"skew-button-wrapper"},ze={class:"skew-button"},Oe={class:"text"};function Xe(n,s){return d(),v("div",qe,[t("div",ze,[t("div",Oe,[ge(n.$slots,"default",{},void 0,!0)])])])}const je=R(Pe,[["render",Xe],["__scopeId","data-v-20f2cd77"]]),K=n=>(j("data-v-e586c86a"),n=n(),J(),n),Je={class:"game-end-rewards"},Ke=K(()=>t("div",{class:"bg"},null,-1)),We={class:"content"},Ye={key:0,class:"reward-cont"},Qe={class:"bottom"},et={key:0,class:"btns"},tt={class:"pick-up-text"},st=K(()=>t("img",{src:Ie,class:"pick-up-img"},null,-1)),at={class:"level-cont"},nt={class:"rank-wrapper"},ot=["src"],rt={class:"lvl-cont"},ct={class:"lvl phantom"},lt={class:"lvl"},it={class:"lvl-label"},dt={class:"progress-cont"},ut={class:"exp-count"},pt={key:0,class:"exp"},mt={key:1,class:"dynamic-exp-count"},_t={class:"exp"},vt={key:2,class:"dynamic-exp-count"},ft={class:"exp"},ht={class:"exp-label"},yt={class:"bottom"},gt=K(()=>t("div",{class:"bg-lvl"},null,-1)),wt=Le('<svg class="bg-sec" viewBox="0 0 1920 768" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e586c86a><path d="M1920 607V209H1664L1510.5 607H1920Z" fill="#4B4D7A" data-v-e586c86a></path><path d="M-1 607H207.5L379 209H-1V607Z" fill="#4B4D7A" data-v-e586c86a></path><path d="M299 607H1413L1560.5 209H459.5L299 607Z" fill="url(#paint0_radial_1918_2441)" fill-opacity="0.5" data-v-e586c86a></path><path class="path-1" d="M332 168H359.5L143 659H113L332 168Z" fill="#1EE3F7" data-v-e586c86a></path><path class="path-2" d="M296.473 50H344.5L-33.6065 907.507H-86L296.473 50Z" fill="#1EE3F7" fill-opacity="0.7" data-v-e586c86a></path><path class="path-3" d="M1729 153H1756L1569 644H1543L1729 153Z" fill="#1EE3F7" data-v-e586c86a></path><path class="path-4" d="M1850.5 0H1896L1570.39 857.507H1518L1850.5 0Z" fill="#1EE3F7" fill-opacity="0.7" data-v-e586c86a></path><defs data-v-e586c86a><radialGradient id="paint0_radial_1918_2441" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(959.5 408) rotate(90) scale(199 960.5)" data-v-e586c86a><stop stop-color="#8C8DAD" data-v-e586c86a></stop><stop offset="1" stop-color="#626382" data-v-e586c86a></stop></radialGradient></defs></svg>',1),bt=re({__name:"GameEndRewards",setup(n){const{t:s}=O(),l=G(),o=F(),a=ce(),g=X(),S=we(),u=N(0),m=N(0),i=N(0),_=N(0),c=N(!1),p=N(0),h=N(0),b=N(0);le(()=>D(this,null,function*(){var I,B;yield o.getMe();const{user:f,userBeforeMatch:r}=o;if(!f)return E({type:"error",text:s("notifications.something-went-wrong")}),a.showRewards=!1,a.gameEndData=null,console.error("Game end reward - user not found");if(!r)return E({type:"error",text:s("notifications.something-went-wrong")}),a.showRewards=!1,a.gameEndData=null,console.error("Game end reward - userBeforeMatch not found");b.value=r.expUntilNextLvl,p.value=r.lvl;const P=[...f.achievements.backgrounds,...f.achievements.emblems],H=[...r.achievements.backgrounds,...r.achievements.emblems],q=P.filter(M=>!H.some(A=>A.id===M.id));u.value=1,q.forEach(M=>E({type:"achievement",text:s("notifications.new-achievement"),id:Number(M.id),duration:3e4})),m.value=r.expSinceLastLvl/(r.expUntilNextLvl/100),h.value=(B=(I=a.gameEndData)==null?void 0:I.rewards.exp)!=null?B:0,yield x(1e3),i.value=(r.expSinceLastLvl+h.value)/(r.expUntilNextLvl/100),r.expUntilNextLvl<r.expSinceLastLvl+h.value&&(f.lvl>r.lvl&&E({type:"level-up",id:f.lvl,duration:3e4}),yield x(1e3),p.value+=1,b.value=f.expUntilNextLvl,i.value=0,m.value=0,_.value=(r.expSinceLastLvl+h.value-r.expUntilNextLvl)/(f.expUntilNextLvl/100))}));const x=f=>new Promise(r=>setTimeout(r,f)),L=()=>D(this,null,function*(){try{a.showRewards=!1,a.gameEndData=null,g.playInterfaceSoundByName("claimReward"),yield o.getMe()}catch(f){E({type:"error",text:`setRewards: ${s("notifications.something-went-wrong")}`}),console.error("set rewards",f)}}),Z=()=>D(this,null,function*(){c.value=!0,(yield S.rewardCommercialVideoWrapper("reward","getIncrTerra"))&&(yield $e.get("/games/getIncrTerra"),L()),c.value=!1}),W=f=>{var r;f===2?(g.playInterfaceSoundByName("click"),(r=a==null?void 0:a.gameEndData)!=null&&r.rewards.terra?u.value=f:(a.showRewards=!1,a.gameEndData=null)):f===3&&L()};return be(()=>{a.showRewards=!1,a.gameEndData=null}),(f,r)=>{var A,Y,Q,ee,te;const P=Ge,H=Te,q=Ve,I=Ue,B=ue,M=je;return d(),v("div",Je,[Ke,t("div",We,[t("div",{style:C({transform:`scale(${e(l).scaleInterfaceValue})`,"transform-origin":"bottom"}),class:"wrapper"},[e(u)===2?(d(),v("div",Ye,[k(P,{name:"terra",count:(Q=(Y=(A=e(a))==null?void 0:A.gameEndData)==null?void 0:Y.rewards.terra)!=null?Q:0},null,8,["count"]),t("div",Qe,[k(H,{class:"reward-text-title",text:e(s)("lobby.game-end-rewards.reward")},null,8,["text"]),e(c)?(d(),$(I,{key:1,class:"loading"})):(d(),v("div",et,[e(o).user&&e(o).user.adsLimit.afterGame.counter<e(o).user.adsLimit.afterGame.limit?(d(),$(q,{key:0,onClick:r[0]||(r[0]=z=>Z()),class:"two-x-rewards"})):w("",!0),t("div",{onMouseenter:r[1]||(r[1]=z=>e(g).playInterfaceSoundByName("hover")),onClick:r[2]||(r[2]=ke(z=>(e(g).playInterfaceSoundByName("click"),W(3)),["stop"])),class:"pick-up-cont"},[t("span",tt,y(e(s)("lobby.game-end-rewards.pick-up")),1),st],32)]))])])):e(u)===1?(d(),v(T,{key:1},[t("div",at,[t("div",nt,[t("img",{src:e(xe)["interface/ranks/"+e(Se)(e(p)).img+".webp"],class:"rank"},null,8,ot)]),t("div",rt,[t("div",ct,y((te=(ee=e(o).user)==null?void 0:ee.lvl)!=null?te:0),1),t("div",lt,y(e(p)),1),t("div",it,y(e(s)("lobby.game-end-rewards.lvl")),1)]),t("div",dt,[e(m)>0?(d(),v("div",{key:0,style:C({"--percentage":e(m)+"%",width:e(m)+"%"}),class:"progress"},null,4)):w("",!0),e(i)>0?(d(),v("div",{key:1,style:C({"--percentage":e(i)+"%","--start":e(m)+"%",width:Math.min(e(i),100)+"%"}),class:"progress new"},null,4)):w("",!0),e(_)>0?(d(),v("div",{key:2,style:C({"--percentage":e(_)+"%",width:Math.min(e(_),100)+"%"}),class:"progress new"},null,4)):w("",!0)]),t("div",ut,[e(i)===0&&e(_)===0?(d(),v("div",pt,y(e(o).userBeforeMatch.expSinceLastLvl)+" / "+y(e(b)),1)):w("",!0),e(i)>0?(d(),v("span",mt,[k(B,{startNumber:e(o).userBeforeMatch.expSinceLastLvl,endNumber:e(o).userBeforeMatch.expSinceLastLvl+e(h),duration:1e3},null,8,["startNumber","endNumber"]),U(" "),t("span",_t,y(`/ ${e(b)}`),1)])):w("",!0),e(_)>0?(d(),v("span",vt,[k(B,{startNumber:0,endNumber:e(o).userBeforeMatch.expSinceLastLvl+e(h)-e(o).userBeforeMatch.expUntilNextLvl,duration:1e3},null,8,["endNumber"]),U(" "),t("span",ft,y(`/ ${e(b)}`),1)])):w("",!0),t("div",ht,y(e(s)("lobby.game-end-rewards.xp")),1)]),t("div",yt,[k(H,{text:e(s)("lobby.game-end-rewards.progress")},null,8,["text"]),k(M,{onClick:r[3]||(r[3]=z=>W(2)),class:"pick-up"},{default:Ne(()=>[U(y(e(s)("lobby.game-end-rewards.next")),1)]),_:1})])]),gt],64)):e(u)===0?(d(),$(I,{key:2,class:"loading"})):w("",!0)],4),wt])])}}}),kt=R(bt,[["__scopeId","data-v-e586c86a"]]),me=n=>(j("data-v-ea2fcfc3"),n=n(),J(),n),xt={class:"currency-wrapper"},St={class:"currency-cont"},Nt=me(()=>t("img",{class:"currency-img",src:Me},null,-1)),Lt=me(()=>t("img",{class:"currency-img",src:Ee},null,-1)),$t={class:"lvl"},It={class:"lvl-label"},Bt={__name:"SmallElements",setup(n){const{t:s}=O(),l=ie(),o=X(),a=F(),g=G(),S=Be(()=>{var i;return((i=a.user)==null?void 0:i.balance)||0}),u=()=>{g.poki||(l.push({name:"store-currency"}),o.playInterfaceSoundByName("click"))},m=()=>{l.push({name:"level-system"}),o.playInterfaceSoundByName("click")};return(i,_)=>{var h;const c=ue,p=pe;return d(),v("div",xt,[t("div",St,[t("div",{onClick:u,onMouseenter:_[0]||(_[0]=b=>e(o).playInterfaceSoundByName("hover")),class:"currency currency-1"},[Nt,k(c,{startNumber:0,endNumber:e(S).credit||0,duration:300},null,8,["endNumber"])],32),t("div",{onClick:u,onMouseenter:_[1]||(_[1]=b=>e(o).playInterfaceSoundByName("hover")),class:"currency currency-2"},[Lt,k(c,{startNumber:0,endNumber:e(S).terra||0,duration:300},null,8,["endNumber"])],32),t("div",{onClick:m,onMouseenter:_[2]||(_[2]=b=>e(o).playInterfaceSoundByName("hover")),class:"lvl-cont"},[t("div",$t,y(((h=e(a).user)==null?void 0:h.lvl)||1),1),t("div",It,y(e(s)("lobby.header.lvl")),1),e(a).rewards.length?(d(),$(p,{key:0,class:"notify-circle"})):w("",!0)],32)])])}}},Mt=R(Bt,[["__scopeId","data-v-ea2fcfc3"]]),Et=["onClick"],Ct={__name:"Navigation",setup(n){const{t:s}=O(),l=Ce(),o=X(),a=F(),g=G(),S=ie(),u=de(),{setParams:m}=Fe(Ze),i=N([{name:"lobby.header.navs.play",active:!1,route:"play"},{name:"lobby.header.navs.inventory",active:!1,route:"inventory"},{name:"lobby.header.navs.store",active:!1,route:"store-menu"},{name:"lobby.header.navs.profile",active:!1,route:"profile"},{name:"lobby.header.navs.center",active:!1,route:"center-leaderboard"}]);i.value.map(c=>(u.name===c.route&&(c.active=!0),c)),Re(u,()=>{i.value.map(c=>{var p;return u.matched[3]&&u.matched[3].name===c.route||((p=u.matched[2])==null?void 0:p.name)===c.route?c.active=!0:c.active=!1,c})}),le(()=>{i.value.forEach((c,p)=>{u.matched[3].name===c.route&&_(c,p)})});const _=(c,p)=>{var h;if(c.route==="profile"){m({subId:((h=a.user)==null?void 0:h.subId)||""});return}i.value.forEach(b=>b.active=!1),i.value[p]=oe(ne({},c),{active:!0}),S.push({name:c.route,query:u.query})};return(c,p)=>{const h=Ae,b=pe;return d(),v("div",{class:V(["navigation",{poki:e(g).poki}])},[e(u).name==="play"?(d(),v(T,{key:0},[t("div",{onClick:p[0]||(p[0]=x=>(e(l).openModal("settings-modal"),e(o).playInterfaceSoundByName("click"))),onMouseenter:p[1]||(p[1]=x=>e(o).playInterfaceSoundByName("hover")),class:V(["settings-cont",{"poki-settings":e(g).poki}])},[k(h,{name:"settings",class:"settings"})],34),e(a).user.lvl>4&&!e(a).user.socialLinked&&!e(g).poki?(d(),v("div",{key:0,onClick:p[2]||(p[2]=x=>{var L;return e(m)({subId:((L=e(a).user)==null?void 0:L.subId)||""}),e(o).playInterfaceSoundByName("click")}),class:"link-service"},y(e(s)("lobby.account.link-warning")),1)):w("",!0)],64)):w("",!0),(d(!0),v(T,null,He(e(i),(x,L)=>(d(),v("div",{onClick:Z=>(_(x,L),e(o).playInterfaceSoundByName("click")),onMouseenter:p[3]||(p[3]=Z=>e(o).playInterfaceSoundByName("hover")),key:L,class:V(["nav-el",{active:x.active}])},[U(y(e(s)(x.name))+" ",1),x.route==="store"&&e(a).canTakeFreeCredits?(d(),$(b,{key:0,class:"exclamation"})):w("",!0)],42,Et))),128))],2)}}},Rt=R(Ct,[["__scopeId","data-v-5f58f820"]]),Ht=n=>(j("data-v-5bcf0e77"),n=n(),J(),n),At=Ht(()=>t("div",{class:"bg-1"},null,-1)),Dt=re({__name:"Header",setup(n){const s=G(),l=F(),o=ce(),a=de();return(g,S)=>{const u=Rt,m=Mt,i=De("RouterView"),_=kt;return d(),v(T,null,[t("div",{class:"top",style:C({transform:`scale(${e(s).scaleInterfaceValue})`,"transform-origin":"top left"})},[k(u),k(m),t("div",{class:V([{"mini-bg":e(a).name!=="play"},"bg"])},null,2)],4),k(i),At,e(o).showRewards&&e(l).user?(d(),$(_,{key:0})):w("",!0)],64)}}}),Ot=R(Dt,[["__scopeId","data-v-5bcf0e77"]]);export{Ot as default};
