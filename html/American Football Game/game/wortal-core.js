!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["wortal-sdk-core"]=t():e.Wortal=t()}(self,(()=>(()=>{"use strict";var e,t,a={1212:(e,t,a)=>{a.d(t,{p:()=>l});var i=a(8119),n=a(6885),s=a(3423),o=a(5273),r=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class l{constructor(){this._isLoggedIn=!1}authenticateAsync(e){return r(this,void 0,void 0,(function*(){const t=e.requestType;switch(t){case"login":return this._loginAsync(e);case"confirmation":return this._confirmAsync(e);case"logout":return this._logoutAsync();case"register":return this._registerAsync(e);case"reset":return this._resetPasswordAsync(e);default:return Promise.reject((0,n.CH)(`${t} is not a valid request type.`,"authenticateAsync",i.H$.AUTHENTICATE_ASYNC))}}))}get isLoggedIn(){return this._isLoggedIn}set isLoggedIn(e){this._isLoggedIn=e,e&&o.e1.forEach((e=>e()))}_loginAsync(e){const t=this._validateLoginAsync(e);return t.valid?this._loginAsyncImpl(e):Promise.reject(t.error)}_confirmAsync(e){const t=this._validateConfirmAsync(e);return t.valid?this._confirmAsyncImpl(e):Promise.reject(t.error)}_logoutAsync(){return this._logoutAsyncImpl()}_registerAsync(e){const t=this._validateRegisterAsync(e);return t.valid?this._registerAsyncImpl(e):Promise.reject(t.error)}_resetPasswordAsync(e){return this._resetPasswordAsyncImpl(e)}_validateLoginAsync(e){return void 0!==e.method&&(0,s.Q2)(e.method)?"email"!==e.method||void 0!==e.email&&(0,s.B9)(e.email)?"password"!==e.method||void 0!==e.password&&(0,s.sl)(e.password)?"phone"!==e.method||void 0!==e.phone&&(0,s.g0)(e.phone)?{valid:!0}:{valid:!1,error:(0,n.CH)("phone is required and must be a valid phone number.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}:{valid:!1,error:(0,n.CH)("password is required and must not be empty.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}:{valid:!1,error:(0,n.CH)("email is required and must be a valid email address.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}:{valid:!1,error:(0,n.CH)("method is required and must be a valid AuthMethod.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}}_validateConfirmAsync(e){return void 0!==e.method&&(0,s.Q2)(e.method)?void 0!==e.code&&(0,s.Qh)(e.code)?"email"!==e.method||void 0!==e.email&&(0,s.B9)(e.email)?"phone"!==e.method||void 0!==e.phone&&(0,s.g0)(e.phone)?{valid:!0}:{valid:!1,error:(0,n.CH)("phone is required and must be a valid phone number.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}:{valid:!1,error:(0,n.CH)("email is required and must be a valid email address.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}:{valid:!1,error:(0,n.CH)("code is required and must not be empty.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}:{valid:!1,error:(0,n.CH)("method is required and must be a valid AuthMethod.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}}_validateRegisterAsync(e){return void 0!==e.method&&(0,s.Q2)(e.method)?"password"!==e.method||void 0!==e.password&&(0,s.sl)(e.password)?{valid:!0}:{valid:!1,error:(0,n.CH)("password is required and must not be empty.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}:{valid:!1,error:(0,n.CH)("method is required and must be a valid AuthMethod.",i.bo.AUTHENTICATE_ASYNC,i.H$.AUTHENTICATE_ASYNC)}}}},8119:(e,t,a)=>{a.d(t,{A9:()=>i,DZ:()=>p,Eo:()=>h,H$:()=>m,JS:()=>r,Km:()=>u,Oj:()=>o,Sn:()=>s,bo:()=>_,ph:()=>d,r1:()=>l,tA:()=>g,wM:()=>c,yB:()=>n});const i={tsutaya:["tsutaya"],kantangame:["kantangame","prod-admin-portal-app-data"],addictinggames:["addictinggames.com","shockwave.com"],crazygames:["crazygames.com","www.crazygames.com","developer.crazygames.com"],facebook:["facebook.com","www.facebook.com","apps.fbsbx.com"],gamemonetize:["gamemonetize.com","gamemonetize.co","gamemonetize.games"],gamepix:["gamepix.com","my.gamepix.com","test.builds.gamepix.com"],gamesnacks:["gamesnacks.com","usercontent.goog"],gd:["revision.gamedistribution.com","gamedistribution.com","html5.gamedistribution.com"],poki:["poki.com","poki.dev","poki-user-content.com","poki"],wortal:["html5gameportal.com","html5gameportal.dev","wortal.ai","wortal.dev","pages.dev"],yandex:["yandex.com","yandex.ru","yandex.net"]},n=["poki","yandex"],s={WORTAL_AD_CONFIG:"https://dash.wortal.ai/api/v1/ad-settings/",WORTAL_CSS:"https://games.wortal.ai/games/wortal-sdk-2/wortal-sdk-2.css",WORTAL_CHUNKS_DEV:"https://storage.googleapis.com/cdn-wortal-ai/dev/",WORTAL_CHUNKS_PROD:"https://storage.googleapis.com/cdn-wortal-ai/v2/",WORTAL_GAME:"https://dash.wortal.ai/api/v1/games/",NOTIFICATIONS:"https://dash.wortal.ai/api/v1/notifications/",XSOLLA_LOGIN_JWT:"https://login.xsolla.com/api",XSOLLA_LOGIN_OAUTH2:"https://login.xsolla.com/api/oauth2",XSOLLA_STORE:"https://store.xsolla.com/api",TSUTAYA_STAGING_URL:"https://stg.game-tsutaya.tsite.jp",TSUTAYA_PRODUCTION_URL:"https://game-tsutaya.tsite.jp",WORTAL_XSOLLA_CONFIG:"https://dash.wortal.ai/api/v1/xsolla-config/",WAVES_BASE_URL:"https://waves.wortal.ai/v1",WORTAL_IAP_STORE:"https://dash.wortal.ai/api/v1/iap/",WORTAL_IAP_PLAYDECK:"https://dash.wortal.ai/api/v1/playdeck/",WORTAL_BASE_API:"https://dash.wortal.ai/api/v1",WORTAL_BASE_TELEGRAM:"https://dash.wortal.ai/api/v1/telegram-wortal"},o={AFG:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",AQUA_SEVER:"https://servedby.aqua-adserver.com/asyncjs.php",TG_ADS:"https://cdn.jsdelivr.net/npm/@tg-ads-mediation/ads-cdn/dist/ads.js",PREBID:"https://games.wortal.ai/embeds/prebid-v9.11.0-pre.js",XSOLLA:"https://login-sdk.xsolla.com/latest/",XSOLLA_PAY_STATION:"https://cdn.xsolla.net/embed/paystation/1.2.7/widget.min.js",WORTAL_CSS:"https://games.wortal.ai/games/wortal-sdk-2/wortal-sdk-2.css",RMP_SDK:"https://storage.googleapis.com/cdn-wortal-ai/others/rmp-vast.min.js",RMP_CSS:"https://storage.googleapis.com/cdn-wortal-ai/others/style.css",ADDICTING_GAMES_SDK:"https://swagapi.shockwave.com/dist/swag-api.js",ADDICTING_GAMES_CSS:"https://swagapi.shockwave.com/dist/swag-api.css",CRAZY_GAMES:"https://sdk.crazygames.com/crazygames-sdk-v3.js",FACEBOOK:"https://connect.facebook.net/en_US/fbinstant.7.1.js",GAME_MONETIZE:"https://api.gamemonetize.com/sdk.js",GAME_PIX:"https://integration.gamepix.com/sdk/v3/gamepix.sdk.js",GD:"https://html5.api.gamedistribution.com/main.min.js",KANTAN_GAME_SDK:"https://img.kantangame.com/game/app/js/gamebox.iframe.js?v=1.5",POKI:"https://game-cdn.poki.com/scripts/v2/poki-sdk.js",YANDEX:"https://yandex.ru/games/sdk/v2",MIXI_TOUCH_SDK:"https://static.mixi.jp/js/application/touch.js",TSUTAYA_SDK_STAGING:{sp:"https://stg.img.game-tsutaya.tsite.jp/sp/common/scripts/game.js",pc:"https://stg.img.game-tsutaya.tsite.jp/pc/common/scripts/game.js"},TSUTAYA_SDK_PRODUCTION:{sp:"https://img.game-tsutaya.tsite.jp/sp/common/scripts/game.js",pc:"https://img.game-tsutaya.tsite.jp/pc/common/scripts/game.js"}},r={GET_USER:"getUser",GET_DATA:"getData",SET_DATA:"setData",GET_SCORE:"getScore",GET_GLOBAL_SCORE:"getGlobalScore",SET_SCORE:"setScore",GET_LOCALE:"getUserLocale",GET_STATE:"getPlaydeckState",GET_USER_PROFILE:"getUserProfile",CUSTOM_SHARE:"customShare",GET_SHARE_LINK:"getShareLink",REQUEST_PAYMENT:"requestPayment",OPEN_TELEGRAM_LINK:"openTelegramLink",GET_INVOICE_CLOSED:"invoiceClosed",GET_PAYMENT_INFO:"getPaymentInfo"},l={LOADING:"LOADING",GET_RAW_DATA:"GET_RAW_DATA",GET_USER_PROFILE:"GET_USER_PROFILE",PERFORM_HAPTIC_FEEDBACK:"PERFORM_HAPTIC_FEEDBACK",GET_LOCALE:"GET_LOCALE",OPEN_INVOICE:"OPEN_INVOICE",INVOICE_CLOSED:"INVOICE_CLOSED"},d={GET_PROFILE:"getProfile",GET_PROFILE_ERROR:"getProfileError",MAKE_PURCHASE:"makePurchase",MAKE_PURCHASE_ERROR:"makePurchaseError",NAVIGATE_TO_EXTERNAL_URL:"navigateToExternalUrl"},c={SDK_READY:"SDK_READY",BEFORE_AD:"SDK_GAME_PAUSE",AFTER_AD:"SDK_GAME_START",AD_DISMISSED:"SKIPPED",AD_VIEWED:"SDK_REWARDED_WATCH_COMPLETE",NO_FILL:"AD_ERROR"},h=[[300,250],[320,50],[320,100],[336,280],[240,400],[300,300],[300,500],[320,480],[360,800],[390,844],[414,896],[360,640]],u=[[1366,768],[1280,720],...h],_={INITIALIZE_ASYNC:"initializeAsync",START_GAME_ASYNC:"startGameAsync",AUTHENTICATE_ASYNC:"authenticateAsync",LINK_ACCOUNT_ASYNC:"linkAccountAsync",SET_LOADING_PROGRESS:"setLoadingProgress",ON_PAUSE:"onPause",ON_RESUME:"onResume",PERFORM_HAPTIC_FEEDBACK_ASYNC:"performHapticFeedbackAsync",GET_SUPPORTED_APIS:"getSupportedAPIs",ACHIEVEMENTS_GET_ACHIEVEMENTS_ASYNC:"achievements.getAchievementsAsync",ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC:"achievements.unlockAchievementAsync",ADS_IS_ENABLED:"ads.isEnabled",ADS_IS_AD_BLOCKED:"ads.isAdBlocked",ADS_SHOW_INTERSTITIAL:"ads.showInterstitial",ADS_SHOW_REWARDED:"ads.showRewarded",ADS_SHOW_BANNER:"ads.showBanner",ANALYTICS_LOG_LEVEL_START:"analytics.logLevelStart",ANALYTICS_LOG_LEVEL_END:"analytics.logLevelEnd",ANALYTICS_LOG_TUTORIAL_START:"analytics.logTutorialStart",ANALYTICS_LOG_TUTORIAL_END:"analytics.logTutorialEnd",ANALYTICS_LOG_LEVEL_UP:"analytics.logLevelUp",ANALYTICS_LOG_SCORE:"analytics.logScore",ANALYTICS_LOG_GAME_CHOICE:"analytics.logGameChoice",ANALYTICS_LOG_SOCIAL_INVITE:"analytics.logSocialInvite",ANALYTICS_LOG_SOCIAL_SHARE:"analytics.logSocialShare",ANALYTICS_LOG_PURCHASE:"analytics.logPurchase",ANALYTICS_LOG_PURCHASE_SUBSCRIPTION:"analytics.logPurchaseSubscription",CONTEXT_GET_ID:"context.getId",CONTEXT_GET_TYPE:"context.getType",CONTEXT_GET_PLAYERS_ASYNC:"context.getPlayersAsync",CONTEXT_INVITE_ASYNC:"context.inviteAsync",CONTEXT_SHARE_ASYNC:"context.shareAsync",CONTEXT_SHARE_LINK_ASYNC:"context.shareLinkAsync",CONTEXT_UPDATE_ASYNC:"context.updateAsync",CONTEXT_CHOOSE_ASYNC:"context.chooseAsync",CONTEXT_SWITCH_ASYNC:"context.switchAsync",CONTEXT_CREATE_ASYNC:"context.createAsync",CONTEXT_IS_SIZE_BETWEEN:"context.isSizeBetween",IAP_IS_ENABLED:"iap.isEnabled",IAP_GET_CATALOG_ASYNC:"iap.getCatalogAsync",IAP_GET_PURCHASES_ASYNC:"iap.getPurchasesAsync",IAP_MAKE_PURCHASE_ASYNC:"iap.makePurchaseAsync",IAP_CONSUME_PURCHASE_ASYNC:"iap.consumePurchaseAsync",IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC:"iap.getSubscribableCatalogAsync",IAP_PURCHASE_SUBSCRIPTION_ASYNC:"iap.purchaseSubscriptionAsync",IAP_GET_SUBSCRIPTIONS_ASYNC:"iap.getSubscriptionsAsync",IAP_CANCEL_SUBSCRIPTION_ASYNC:"iap.cancelSubscriptionAsync",LEADERBOARD_GET_LEADERBOARD_ASYNC:"leaderboard.getLeaderboardAsync",LEADERBOARD_SEND_ENTRY_ASYNC:"leaderboard.sendEntryAsync",LEADERBOARD_GET_ENTRIES_ASYNC:"leaderboard.getEntriesAsync",LEADERBOARD_GET_PLAYER_ENTRY_ASYNC:"leaderboard.getPlayerEntryAsync",LEADERBOARD_GET_ENTRY_COUNT_ASYNC:"leaderboard.getEntryCountAsync",LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC:"leaderboard.getConnectedPlayerEntriesAsync",NOTIFICATIONS_SCHEDULE_ASYNC:"notifications.scheduleAsync",NOTIFICATIONS_GET_HISTORY_ASYNC:"notifications.getHistoryAsync",NOTIFICATIONS_CANCEL_ASYNC:"notifications.cancelAsync",NOTIFICATIONS_CANCEL_ALL_ASYNC:"notifications.cancelAllAsync",PLAYER_GET_ID:"player.getID",PLAYER_GET_NAME:"player.getName",PLAYER_GET_PHOTO:"player.getPhoto",PLAYER_IS_FIRST_PLAY:"player.isFirstPlay",PLAYER_IS_LOGGED_IN:"player.isLoggedIn",PLAYER_GET_DATA_ASYNC:"player.getDataAsync",PLAYER_SET_DATA_ASYNC:"player.setDataAsync",PLAYER_FLUSH_DATA_ASYNC:"player.flushDataAsync",PLAYER_GET_CONNECTED_PLAYERS_ASYNC:"player.getConnectedPlayersAsync",PLAYER_GET_SIGNED_PLAYER_INFO_ASYNC:"player.getSignedPlayerInfoAsync",PLAYER_GET_ASID_ASYNC:"player.getASIDAsync",PLAYER_GET_SIGNED_ASID_ASYNC:"player.getSignedASIDAsync",PLAYER_CAN_SUBSCRIBE_BOT_ASYNC:"player.canSubscribeBotAsync",PLAYER_SUBSCRIBE_BOT_ASYNC:"player.subscribeBotAsync",PLAYER_GET_TOKEN_ASYNC:"player.getTokenAsync",PLAYER_ON_LOGIN:"player.onLogin",SESSION_GET_ENTRY_POINT_DATA:"session.getEntryPointData",SESSION_GET_ENTRY_POINT_ASYNC:"session.getEntryPointAsync",SESSION_SET_SESSION_DATA:"session.setSessionData",SESSION_GET_LOCALE:"session.getLocale",SESSION_GET_TRAFFIC_SOURCE:"session.getTrafficSource",SESSION_GET_PLATFORM:"session.getPlatform",SESSION_GET_DEVICE:"session.getDevice",SESSION_GET_ORIENTATION:"session.getOrientation",SESSION_ON_ORIENTATION_CHANGE:"session.onOrientationChange",SESSION_SWITCH_GAME_ASYNC:"session.switchGameAsync",SESSION_HAPPY_TIME:"session.happyTime",SESSION_ON_AUDIO_STATUS_CHANGE:"session.onAudioStatusChange",SESSION_GAMEPLAY_START:"session.gameplayStart",SESSION_GAMEPLAY_STOP:"session.gameplayStop",SESSION_GAME_LOADING_START:"session.gameLoadingStart",SESSION_GAME_LOADING_STOP:"session.gameLoadingStop",SESSION_NAVIGATE_TO_EXTERNAL_URL:"session.navigateToExternalUrl",STATS_GET_STATS_ASYNC:"stats.getStatsAsync",STATS_POST_STATS_ASYNC:"stats.postStatsAsync",TOURNAMENT_GET_CURRENT_ASYNC:"tournament.getCurrentAsync",TOURNAMENT_GET_ALL_ASYNC:"tournament.getAllAsync",TOURNAMENT_POST_SCORE_ASYNC:"tournament.postScoreAsync",TOURNAMENT_CREATE_ASYNC:"tournament.createAsync",TOURNAMENT_SHARE_ASYNC:"tournament.shareAsync",TOURNAMENT_JOIN_ASYNC:"tournament.joinAsync"},g={ADS_SHOW_BANNER:"SHOW_BANNER",ADS_SHOW_INTERSTITIAL:"SHOW_INTERSTITIAL",ADS_SHOW_REWARDED:"SHOW_REWARDED",ADS_RESPONSE:"ADS_RESPONSE",ADS_RESPONSE_NO_ADS:"NO_ADS",ADS_RESPONSE_DISMISSED:"ADS_DISMISSED",ADS_RESPONSE_ERROR:"ADS_ERROR",WORTAL_NATIVE_START:"WORTAL_NATIVE_START",PERFORM_HAPTIC_FEEDBACK:"PERFORM_HAPTIC_FEEDBACK",LOADING:"LOADING,"},m={GET_SUPPORTED_APIS:"https://docs.games-api.ai/api/wortal/#getsupportedapis",INITIALIZE_ASYNC:"https://docs.games-api.ai/api/wortal/#initializeasync",START_GAME_ASYNC:"https://docs.games-api.ai/api/wortal/#startgameasync",AUTHENTICATE_ASYNC:"https://docs.games-api.ai/api/wortal/#authenticateasync",LINK_ACCOUNT_ASYNC:"https://docs.games-api.ai/api/wortal/#linkaccountasync",SET_LOADING_PROGRESS:"https://docs.games-api.ai/api/wortal/#setloadingprogress",ON_PAUSE:"https://docs.games-api.ai/api/wortal/#onpause",ON_RESUME:"https://docs.games-api.ai/api/wortal/#onresume",PERFORM_HAPTIC_FEEDBACK_ASYNC:"https://docs.games-api.ai/api/wortal/#performhapticfeedbackasync",ACHIEVEMENTS_GET_ACHIEVEMENTS_ASYNC:"https://docs.games-api.ai/api/achievements/#getachievementsasync",ACHIEVEMENTS_UNLOCK_ACHIEVEMENT_ASYNC:"https://docs.games-api.ai/api/achievements/#unlockachievementasync",ADS_SHOW_INTERSTITIAL:"https://docs.games-api.ai/api/ads/#showinterstitial",ADS_SHOW_REWARDED:"https://docs.games-api.ai/api/ads/#showrewarded",ADS_SHOW_BANNER:"https://docs.games-api.ai/api/ads/#showbanner",ANALYTICS_LOG_LEVEL_START:"https://docs.games-api.ai/api/analytics/#loglevelstart",ANALYTICS_LOG_LEVEL_END:"https://docs.games-api.ai/api/analytics/#loglevelend",ANALYTICS_LOG_LEVEL_UP:"https://docs.games-api.ai/api/analytics/#loglevelup",ANALYTICS_LOG_SCORE:"https://docs.games-api.ai/api/analytics/#logscore",ANALYTICS_LOG_GAME_CHOICE:"https://docs.games-api.ai/api/analytics/#loggamechoice",ANALYTICS_LOG_SOCIAL_INVITE:"https://docs.games-api.ai/api/analytics/#logsocialinvite",ANALYTICS_LOG_SOCIAL_SHARE:"https://docs.games-api.ai/api/analytics/#logsocialshare",ANALYTICS_LOG_PURCHASE:"https://docs.games-api.ai/api/analytics/#logpurchase",ANALYTICS_LOG_PURCHASE_SUBSCRIPTION:"https://docs.games-api.ai/api/analytics/#logpurchasesubscription",ANALYTICS_LOG_TUTORIAL_END:"https://docs.games-api.ai/api/analytics/#logtutorialend",ANALYTICS_LOG_TUTORIAL_START:"https://docs.games-api.ai/api/analytics/#logtutorialstart",CONTEXT_GET_ID:"https://docs.games-api.ai/api/context/#getid",CONTEXT_GET_TYPE:"https://docs.games-api.ai/api/context/#gettype",CONTEXT_GET_PLAYERS_ASYNC:"https://docs.games-api.ai/api/context/#getplayersasync",CONTEXT_INVITE_ASYNC:"https://docs.games-api.ai/api/context/#inviteasync",CONTEXT_IS_SIZE_BETWEEN:"https://docs.games-api.ai/api/context/#issizebetween",CONTEXT_SHARE_ASYNC:"https://docs.games-api.ai/api/context/#shareasync",CONTEXT_SHARE_LINK_ASYNC:"https://docs.games-api.ai/api/context/#sharelinkasync",CONTEXT_UPDATE_ASYNC:"https://docs.games-api.ai/api/context/#updateasync",CONTEXT_CHOOSE_ASYNC:"https://docs.games-api.ai/api/context/#chooseasync",CONTEXT_SWITCH_ASYNC:"https://docs.games-api.ai/api/context/#switchasync",CONTEXT_CREATE_ASYNC:"https://docs.games-api.ai/api/context/#createasync",IAP_GET_CATALOG_ASYNC:"https://docs.games-api.ai/api/iap/#getcatalogasync",IAP_GET_PURCHASES_ASYNC:"https://docs.games-api.ai/api/iap/#getpurchasesasync",IAP_MAKE_PURCHASE_ASYNC:"https://docs.games-api.ai/api/iap/#makepurchaseasync",IAP_CONSUME_PURCHASE_ASYNC:"https://docs.games-api.ai/api/iap/#consumepurchaseasync",IAP_GET_SUBSCRIBABLE_CATALOG_ASYNC:"https://docs.games-api.ai/api/iap/#getsubscribablecatalogasync",IAP_PURCHASE_SUBSCRIPTION_ASYNC:"https://docs.games-api.ai/api/iap/#purchasesubscriptionasync",IAP_GET_SUBSCRIPTIONS_ASYNC:"https://docs.games-api.ai/api/iap/#getsubscriptionsasync",IAP_CANCEL_SUBSCRIPTION_ASYNC:"https://docs.games-api.ai/api/iap/#cancelsubscriptionasync",LEADERBOARD_GET_LEADERBOARD_ASYNC:"https://docs.games-api.ai/api/leaderboard/#getleaderboardasync",LEADERBOARD_SEND_ENTRY_ASYNC:"https://docs.games-api.ai/api/leaderboard/#sendentryasync",LEADERBOARD_GET_ENTRIES_ASYNC:"https://docs.games-api.ai/api/leaderboard/#getentriesasync",LEADERBOARD_GET_PLAYER_ENTRY_ASYNC:"https://docs.games-api.ai/api/leaderboard/#getplayerentryasync",LEADERBOARD_GET_ENTRY_COUNT_ASYNC:"https://docs.games-api.ai/api/leaderboard/#getentrycountasync",LEADERBOARD_GET_CONNECTED_PLAYER_ENTRIES_ASYNC:"https://docs.games-api.ai/api/leaderboard/#getconnectedplayerentriesasync",NOTIFICATIONS_SCHEDULE_ASYNC:"https://docs.games-api.ai/api/notifications/#scheduleasync",NOTIFICATIONS_GET_HISTORY_ASYNC:"https://docs.games-api.ai/api/notifications/#gethistoryasync",NOTIFICATIONS_CANCEL_ASYNC:"https://docs.games-api.ai/api/notifications/#cancelasync",NOTIFICATIONS_CANCEL_ALL_ASYNC:"https://docs.games-api.ai/api/notifications/#cancelallasync",PLAYER_GET_DATA_ASYNC:"https://docs.games-api.ai/api/player/#getdataasync",PLAYER_SET_DATA_ASYNC:"https://docs.games-api.ai/api/player/#setdataasync",PLAYER_FLUSH_DATA_ASYNC:"https://docs.games-api.ai/api/player/#flushdataasync",PLAYER_GET_CONNECTED_PLAYERS_ASYNC:"https://docs.games-api.ai/api/player/#getconnectedplayersasync",PLAYER_GET_SIGNED_PLAYER_INFO_ASYNC:"https://docs.games-api.ai/api/player/#getsignedplayerinfoasync",PLAYER_GET_ASID_ASYNC:"https://docs.games-api.ai/api/player/#getasidasync",PLAYER_GET_SIGNED_ASID_ASYNC:"https://docs.games-api.ai/api/player/#getsignedasidasync",PLAYER_CAN_SUBSCRIBE_BOT_ASYNC:"https://docs.games-api.ai/api/player/#cansubscribebotasync",PLAYER_SUBSCRIBE_BOT_ASYNC:"https://docs.games-api.ai/api/player/#subscribebotasync",PLAYER_GET_ID:"https://docs.games-api.ai/api/player/#getid",PLAYER_GET_NAME:"https://docs.games-api.ai/api/player/#getname",PLAYER_GET_PHOTO:"https://docs.games-api.ai/api/player/#getphoto",PLAYER_IS_FIRST_PLAY:"https://docs.games-api.ai/api/player/#isfirstplay",PLAYER_IS_LOGGED_IN:"https://docs.games-api.ai/api/player/#isloggedin",PLAYER_GET_TOKEN_ASYNC:"https://docs.games-api.ai/api/player/#gettokenasync",PLAYER_ON_LOGIN:"https://docs.games-api.ai/api/player/#onlogin",SESSION_GAMEPLAY_STOP:"https://docs.games-api.ai/api/session/#gameplaystop",SESSION_GAMEPLAY_START:"https://docs.games-api.ai/api/session/#gameplaystart",SESSION_GET_LOCALE:"https://docs.games-api.ai/api/session/#getlocale",SESSION_GET_TRAFFIC_SOURCE:"https://docs.games-api.ai/api/session/#gettrafficsource",SESSION_GET_PLATFORM:"https://docs.games-api.ai/api/session/#getplatform",SESSION_GET_DEVICE:"https://docs.games-api.ai/api/session/#getdevice",SESSION_GET_ORIENTATION:"https://docs.games-api.ai/api/session/#getorientation",SESSION_GET_ENTRY_POINT_DATA:"https://docs.games-api.ai/api/session/#getentrypointdata",SESSION_GET_ENTRY_POINT_ASYNC:"https://docs.games-api.ai/api/session/#getentrypointasync",SESSION_SET_SESSION_DATA:"https://docs.games-api.ai/api/session/#setsessiondata",SESSION_HAPPY_TIME:"https://docs.games-api.ai/api/session/#happytime",SESSION_ON_ORIENTATION_CHANGE:"https://docs.games-api.ai/api/session/#onorientationchange",SESSION_ON_AUDIO_STATUS_CHANGE:"https://docs.games-api.ai/api/session/#onaudiostatuschange",SESSION_SWITCH_GAME_ASYNC:"https://docs.games-api.ai/api/session/#switchgameasync",SESSION_NAVIGATE_TO_EXTERNAL_URL:"https://docs.games-api.ai/api/session/#navigatetoexternalurl",STATS_GET_STATS_ASYNC:"https://docs.games-api.ai/api/stats/#getstatsasync",STATS_POST_STATS_ASYNC:"https://docs.games-api.ai/api/stats/#poststatsasync",TOURNAMENT_GET_CURRENT_ASYNC:"https://docs.games-api.ai/api/tournament/#getcurrentasync",TOURNAMENT_GET_ALL_ASYNC:"https://docs.games-api.ai/api/tournament/#getallasync",TOURNAMENT_POST_SCORE_ASYNC:"https://docs.games-api.ai/api/tournament/#postscoreasync",TOURNAMENT_CREATE_ASYNC:"https://docs.games-api.ai/api/tournament/#createasync",TOURNAMENT_SHARE_ASYNC:"https://docs.games-api.ai/api/tournament/#shareasync",TOURNAMENT_JOIN_ASYNC:"https://docs.games-api.ai/api/tournament/#joinasync"},p={SDK_WARNING:"sdk-warning",SDK_ERROR:"sdk-error",SDK_STATUS:"sdk-status",SDK_API_CALL:"sdk-api-call",SDK_API_SUCCESS:"sdk-api-success",SDK_API_ERROR:"sdk-api-error",SDK_INTERNAL_CALL:"sdk-internal-call",SDK_PERFORMANCE:"sdk-performance"}},6885:(e,t,a)=>{a.d(t,{$t:()=>o,CH:()=>l,Nj:()=>n,OS:()=>c,U:()=>r,U6:()=>m,dJ:()=>g,h4:()=>u,pP:()=>h,v0:()=>s,wL:()=>_,zt:()=>d});var i=a(5894);function n(e,t,a){const n={code:e.code||"UNKNOWN",message:e.message||"No message provided by the platform SDK.",context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function s(e,t,a){const n={code:S[e.code]||"UNKNOWN",message:A[S[e.code]]||"No message provided by the platform SDK.",context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function o(e,t,a){const n={code:e.status.toString(),message:e.message||"No message provided by the platform SDK.",context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function r(e,t,a){const n={code:y[e]||"UNKNOWN",message:A[y[e]]||"No message provided by the platform SDK.",context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function l(e="",t,a){const n={code:"INVALID_PARAM",message:e||A.INVALID_PARAM,context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function d(e,t,a){const n={code:"INVALID_OPERATION",message:e,context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function c(e="",t,a){const n={code:"NOT_SUPPORTED",message:e||A.NOT_SUPPORTED,context:t,url:a||"https://docs.games-api.ai/api/wortal/#getsupportedapis"};return p(n),i.default._log.exception(n.code,n),n}function h(e,t,a){const n={code:"OPERATION_FAILED",message:e,context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function u(e,t,a){const n={code:"INITIALIZATION_ERROR",message:e,context:t,url:a||"https://docs.games-api.ai/wortal-html5/#initialization"};return i.default._log.apiError("initializeAsync",n),p(n),i.default._log.exception(n.code,n),n}function _(e="",t,a){const n={code:"NOT_INITIALIZED",message:e||A.NOT_INITIALIZED,context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function g(e="",t="",a){const n={code:"IMPLEMENTATION_ERROR",message:"Called implementation function from the base layer.",context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function m(e="",t="",a){const n={code:"AD_RENDER_FAILURE",message:e||A.AD_RENDER_FAILURE,context:t,url:a};return p(n),i.default._log.exception(n.code,n),n}function p(e){i.default.isInitialized&&i.default.analytics._logError(e)}const A={ACHIEVEMENT_NOT_FOUND:"No achievement with the requested name was found. Either the achievement does not exist yet, or the name did not match any registered achievement configuration for the game.",AD_RENDER_FAILURE:"Ad failed to render properly.",AUTH_IN_PROGRESS:"The game attempted to show an authentication prompt, but a prompt to authenticate is already in progress.",AUTH_NOT_ENABLED:"The game attempted to perform an operation that requires authentication, but the game has not enabled authentication.",CLIENT_UNSUPPORTED_OPERATION:"The client does not support the current operation. This may be due to lack of support on the client version or platform, or because the operation is not allowed for the game or player.",INITIALIZATION_ERROR:"The SDK failed to initialize, this can occur if the Wortal SDK encountered an error during initialization or if the platform SDK failed to initialize.",INVALID_OPERATION:"The requested operation is invalid for the current game state. This may include requests that violate limitations, such as exceeding storage thresholds, or are not available in a certain state, such as making a context-specific request in a solo context.",INVALID_PARAM:"The parameter(s) passed to the API are invalid. Could indicate an incorrect type, invalid number of arguments, or a semantic issue (for example, passing an unserializable object to a serializing function).",LEADERBOARD_NOT_FOUND:"No leaderboard with the requested name was found. Either the leaderboard does not exist yet, or the name did not match any registered leaderboard configuration for the game.",LEADERBOARD_WRONG_CONTEXT:"Attempted to write to a leaderboard that's associated with a context other than the one the game is currently being played in.",LINK_IN_PROGRESS:"The game attempted to show an account linking prompt, but a prompt to link accounts is already in progress.",NETWORK_FAILURE:"The client experienced an issue with a network request. This is likely due to a transient issue, such as the player's internet connection dropping.",NOT_INITIALIZED:"The SDK has not been initialized yet. This can occur if the game attempts to call an SDK function before the SDK has been initialized. Check Wortal.isInitialized or wait for Wortal.initializeAsync to complete before calling other SDK functions.",NOT_SUPPORTED:"Function or feature is not currently supported on the platform currently being played on.",OPERATION_FAILED:"The operation failed, this is typically thrown during a failed web request and the message may include additional details about the failure.",PAYMENTS_NOT_INITIALIZED:"The client has not completed setting up payments or is not accepting payments API calls.",PAYMENTS_OPERATION_FAILURE:"The client encountered an error while performing a payments operation.",PENDING_REQUEST:"Represents a rejection due an existing request that conflicts with this one. For example, we will reject any calls that would surface a Facebook UI when another request that depends on a Facebook UI is pending.",RATE_LIMITED:"Some APIs or operations are being called too often. This is likely due to the game calling a particular API an excessive amount of times in a very short period. Reducing the rate of requests should cause this error to go away.",SAME_CONTEXT:"The game attempted to perform a context switch into the current context.",TOURNAMENT_NOT_FOUND:"No tournament with the given ID was found. Either the tournament does not exist yet, or has expired.",UNKNOWN:"An unknown or unspecified issue occurred. This is the default error code returned when the client does not specify a code.",USER_ALREADY_AUTHENTICATED:"The game attempted to authenticate a user, but the user is already authenticated.",USER_INPUT:"The user made a choice that resulted in a rejection. For example, if the game calls up the Context Switch dialog and the player closes it, this error code will be included in the promise rejection.",USER_NOT_AUTHENTICATED:"The game attempted to perform an operation that requires authentication, but the user is not authenticated."},S={authNotEnabled:"AUTH_NOT_ENABLED",userNotAuthenticated:"USER_NOT_AUTHENTICATED",showAuthPromptInProgress:"AUTH_IN_PROGRESS",userAlreadySignedIn:"USER_ALREADY_AUTHENTICATED",userCancelled:"USER_INPUT",showAccountLinkPromptInProgress:"LINK_IN_PROGRESS",unexpectedError:"UNKNOWN"},y={USER_NOT_AUTHORIZED:"The game attempted to perform an operation that requires authentication, but the user is not authenticated."}},5894:(e,t,a)=>{a.d(t,{default:()=>M});var i=a(8119),n=a(6885),s=a(3423),o=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class r{constructor(){this._data={isAdBlocked:!1,hasPrerollShown:!1,interstitialId:"",rewardedId:"",bannerId:"",adsCalled:0,adsShown:0,frequencyCapS:30,lastAdCallTimeMS:0,isEnabled:!0,inHouseAdConfig:{interstitial:{slotID:"INTERSTITIAL-VIDEO",settings:{id:"",zoneId:""}},rewarded:{slotID:"REWARDED-VIDEO",settings:{id:"",zoneId:""}},isEnabled:!1}}}initialize(){return M._log.debug("Initializing AdConfig.."),M._log.debug("AdConfig initialized.",this._data),Promise.resolve()}get isAdBlocked(){return this._data.isAdBlocked}setAdBlocked(e){this._data.isAdBlocked=e}get isEnabled(){return this._data.isEnabled}setIsEnabled(e){this._data.isEnabled=e}get hasPrerollShown(){return this._data.hasPrerollShown}setPrerollShown(e){this._data.hasPrerollShown=e}get interstitialId(){return this._data.interstitialId}get rewardedId(){return this._data.rewardedId}get bannerId(){return this._data.bannerId}get adsCalled(){return this._data.adsCalled}adCalled(){this._data.adsCalled++}get adsShown(){return this._data.adsShown}get inHouseAdConfig(){return this._data.inHouseAdConfig}get inHouseAdEnabled(){return this._data.inHouseAdConfig.isEnabled}setfrequencyCapS(e){this._data.frequencyCapS=e}setInHouseAdEnabled(e){this._data.inHouseAdConfig.isEnabled=e}adShown(){this._data.adsShown++}isFrequencyCapped(){const e=1e3*this._data.frequencyCapS;return(new Date).getTime()-this._data.lastAdCallTimeMS<e}resetFrequencyCap(){this._data.lastAdCallTimeMS=(new Date).getTime()}initializeInHouseAd(){return o(this,void 0,void 0,(function*(){M._log.internalCall("initializeInHouseAd");const e=performance.now();return this._initializeRMPPlayer().then((()=>{const t=performance.now()-e;M._log.performanceLog(`In house Ads initialized in ${t}ms.`),M._log.debug("Ads: In house Ads initialized.")})).catch((e=>Promise.reject((0,n.h4)(e,"initializeInHouseAd"))))}))}getInHouseAdSetting(){return o(this,void 0,void 0,(function*(){M._log.status("Ads: Fetching in house ad units from Wortal API..");const e=performance.now();if(void 0===window.wortalGameID)return Promise.reject((0,n.h4)("Failed to retrieve wortalGameID. This may be due to an error when uploading the game bundle to Wortal.","getInHouseAdSetting"));let t=`${i.Sn.WORTAL_AD_CONFIG}${window.wortalGameID}/?platform=${M._internalPlatform}&inhousead=true`;try{const a=yield fetch(t);if(M._log.debug("Ads: Fetching in house ad units from Wortal API response: ",a),!a.ok)return Promise.reject((0,n.h4)("Failed to fetch ad settings from Wortal API.","getInHouseAdSetting"));const i=yield a.json();M._log.debug("Ads: Fetching ad units from Wortal API response JSON: ",i);const s=performance.now()-e;M._log.performanceLog(`Ads fetched in ${s}ms.`);return i.ads.filter((e=>"inhouse"===e.code)).forEach((e=>{this._parseInHouseConfig(e)})),i}catch(e){return Promise.reject((0,n.h4)(e,"getInHouseAdSetting"))}}))}_parseInHouseConfig(e){M._log.internalCall("_parseInHouseConfig");const t=e.settings;if("object"!=typeof t||!("id"in t)||!("zoneId"in t))throw(0,n.h4)("inhouse ad settings are not valid.","_parseInHouseConfig");if(!(0,s.Qh)(t.id))throw(0,n.h4)("inhouse ad ID is not valid.","_parseInHouseConfig");if(!(0,s.Qh)(t.zoneId))throw(0,n.h4)("inhouse ad zone ID is not valid.","_parseInHouseConfig");"interstitial"==e.ad_type?(this._data.inHouseAdConfig.interstitial.settings.id=t.id,this._data.inHouseAdConfig.interstitial.settings.zoneId=t.zoneId,M._log.debug("Ads: inhouse interstitial config parsed.",this._data.inHouseAdConfig.interstitial)):"rewarded"==e.ad_type&&(this._data.inHouseAdConfig.rewarded.settings.id=t.id,this._data.inHouseAdConfig.rewarded.settings.zoneId=t.zoneId,M._log.debug("Ads: inhouse rewarded config parsed.",this._data.inHouseAdConfig.rewarded))}_initializeRMPPlayer(){return o(this,void 0,void 0,(function*(){return M._log.internalCall("_initializeAqua"),new Promise(((e,t)=>{const a=document.createElement("script");a.src=i.Oj.RMP_SDK,a.onload=()=>{this._data.inHouseAdConfig.isEnabled=!0,M._log.debug("Ads: Aqua SDK loaded."),e()},a.onerror=()=>{this._data.inHouseAdConfig.isEnabled=!1,e()},document.head.appendChild(a)}))}))}}var l=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class d extends r{constructor(){super(...arguments),this._afgConfig={channelHostID:"",channelID:"",clientID:"ca-pub-123456789",hostID:"",frequencyCap:"1s",pageURL:window.location.href,isDebugMode:!0,isEnabled:!0,source:""}}initialize(){return l(this,void 0,void 0,(function*(){M._log.debug("Ads: Initializing ad config..");try{yield this._initializeAFG()}catch(e){return Promise.reject(e)}M._log.debug("Ads: Ad config initialized.")}))}_internalAFGConfig(){return this._afgConfig}_initializeAFG(){return l(this,void 0,void 0,(function*(){return M._log.internalCall("_initializeAFG"),new Promise((e=>{const t=document.createElement("script");t.setAttribute("src",i.Oj.AFG),t.setAttribute("type","text/javascript"),t.setAttribute("data-ad-client","ca-pub-123456789"),t.setAttribute("data-adbreak-test","on"),t.onload=()=>{window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.adsbygoogle=window.adsbygoogle||[],window.adBreak=window.adConfig=function(e){window.adsbygoogle.push(e)},window.adConfig({preloadAdBreaks:"on"}),this._afgConfig.isEnabled=!0,M._log.debug("Ads: AFG SDK loaded."),e()},t.onerror=()=>{this._afgConfig.isEnabled=!1,M.ads._internalAdConfig.setAdBlocked(!0),M._log.warn("Ad blocker detected. AFG SDK failed to load."),e()},document.head.appendChild(t)}))}))}}var c=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class h extends r{initialize(){return c(this,void 0,void 0,(function*(){M._log.debug("Initializing AdConfig.."),yield this._getAdUnitIDs(),M._log.debug("AdConfig initialized.",this._data)}))}_getAdUnitIDs(){return c(this,void 0,void 0,(function*(){try{if(M._log.debug("Ads: Fetching Facebook ad units from Wortal API.."),void 0===window.wortalGameID)return Promise.reject((0,n.h4)("Failed to retrieve wortalGameID. This may be due to an error when uploading the game bundle to Facebook.","_getAdUnitIDs"));const e=i.Sn.WORTAL_GAME+window.wortalGameID+"/facebook/ad-placements/",t=yield fetch(e);M._log.debug("Ads: Fetching Facebook ad units from Wortal API response: ",t);const a=yield t.json();if(M._log.debug("Ads: Fetching Facebook ad units from Wortal API response JSON: ",a),!a||!a.ads)return void M._log.exception("Ads: Failed to retrieve ad units. This may be due to a server issue or the API being currently unavailable.");if(0===a.ads.length)return void M._log.warn("Ads: No ad units returned. Please contact your Wortal representative to set up your ad units before attempting to show ads.");for(let e=0;e<a.ads.length;e++)"interstitial"!==a.ads[e].display_format||(0,s.Qh)(this._data.interstitialId)?"rewarded_video"!==a.ads[e].display_format||(0,s.Qh)(this._data.rewardedId)?"banner"!==a.ads[e].display_format||(0,s.Qh)(this._data.bannerId)||(this._data.bannerId=a.ads[e].placement_id):this._data.rewardedId=a.ads[e].placement_id:this._data.interstitialId=a.ads[e].placement_id}catch(e){return Promise.reject((0,n.pP)(e,"_getAdUnitIDs"))}}))}}var u=a(5273),_=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class g extends r{constructor(){super(...arguments),this._prebidConfig={interstitial:{code:"",mediaTypes:{banner:{sizes:i.Km}},bids:[]},rewarded:{code:"",mediaTypes:{banner:{sizes:i.Km}},bids:[]},timeout:3e3,failSafeTimeout:5e3,isDebugMode:!1,isEnabled:!1},this._prebidNoFillFallbackConfig={interstitial:{code:"",mediaTypes:{banner:{sizes:i.Km}},bids:[]},rewarded:{code:"",mediaTypes:{banner:{sizes:i.Km}},bids:[]},timeout:3e3,failSafeTimeout:5e3,isDebugMode:!1,isEnabled:!1},this._aquaConfig={interstitial:{slotID:"INTERSTITIAL-AD",settings:{id:"",zoneId:""}},rewarded:{slotID:"REWARDED-INTERSTITIAL-AD",settings:{id:"",zoneId:""}},isEnabled:!1},this._afgConfig={channelHostID:"",channelID:"",clientID:"",hostID:"",frequencyCap:"30s",pageURL:window.location.href,isDebugMode:!1,isEnabled:!1,source:""}}initialize(){return _(this,void 0,void 0,(function*(){M._log.debug("Ads: Initializing ad config..");try{yield Promise.race([function(e,t="timeout"){return new Promise(((a,i)=>setTimeout((()=>i(new Error(t))),e)))}(2e3),this._initAdSetup()])}catch(e){if("timeout"!==e.message)return Promise.reject(e);M._log.info("Ad server initialization took more than 2000ms, stop waiting for initialization.")}}))}_internalPrebidConfig(){return this._prebidConfig}_internalPrebidNoFillFallbackConfig(){return this._prebidNoFillFallbackConfig}_internalAquaConfig(){return this._aquaConfig}_internalAFGConfig(){return this._afgConfig}_initAdSetup(){return _(this,void 0,void 0,(function*(){try{this._afgConfig.source=(0,u.Ez)("source")||"",yield this._getAdSettings(),this._data.isEnabled&&(yield this._initializeAdSever())}catch(e){return Promise.reject(e)}M._log.debug("Ads: Ad config initialized.")}))}_getAdSettings(){return _(this,void 0,void 0,(function*(){M._log.status("Ads: Fetching ad units from Wortal API..");const e=performance.now();if(void 0===window.wortalGameID)return Promise.reject((0,n.h4)("Failed to retrieve wortalGameID. This may be due to an error when uploading the game bundle to Wortal.","_getAdSettings"));let t=`${i.Sn.WORTAL_AD_CONFIG}${window.wortalGameID}/?platform=${M._internalPlatform}`;this._afgConfig.source&&(t=`${t}&source=${this._afgConfig.source}`);try{const a=yield fetch(t);if(M._log.debug("Ads: Fetching ad units from Wortal API response: ",a),!a.ok)return Promise.reject((0,n.h4)("Failed to fetch ad settings from Wortal API.","_getAdSettings"));const i=yield a.json();if(M._log.debug("Ads: Fetching ad units from Wortal API response JSON: ",i),i.ad_free)return this.setIsEnabled(!1),M._log.debug("Ads: Ad free mode is On"),i;i.frequency_cap&&(this._afgConfig.frequencyCap=`${i.frequency_cap}s`,this._data.frequencyCapS=i.frequency_cap),M.session._internalSession.orientation=i.orientation;const s=i.ads.filter((e=>"wortal"===e.code));if(s.length>0&&i.ads.length===s.length)return this._parseSandboxConfig(i),i;this._parsePrebidConfig(i);i.ads.filter((e=>"aqua"===e.code)).forEach((e=>{this._parseAquaConfig(e)}));const o=i.ads.filter((e=>"afg"===e.code));o.length>0&&this._parseAFGConfig(o[0]);i.ads.filter((e=>"inhouse"===e.code)).forEach((e=>{this._parseInHouseConfig(e)}));i.ads.filter((e=>"wortal"===e.code)).length>0&&this._parseNoFillFallbackConfig(i);const r=performance.now()-e;return M._log.performanceLog(`Ads fetched in ${r}ms.`),i}catch(e){return Promise.reject((0,n.h4)(e,"_getAdSettings"))}}))}_initializeAdSever(){return _(this,void 0,void 0,(function*(){M._log.internalCall("_initializeAdSever");const e=performance.now();return this._prebidConfig.isDebugMode?this._initializeSandbox().then((()=>{const t=performance.now()-e;M._log.performanceLog(`Ads fetched in ${t}ms.`),M._log.debug("Ads: Ad server initialized.")})).catch((e=>Promise.reject((0,n.h4)(e,"_initializeAdSever")))):Promise.all([this._initializePrebid(),this._initializeAqua(),this._initializeAFG()]).then((()=>this.initializeInHouseAd())).then((()=>{const t=performance.now()-e;M._log.performanceLog(`Ads fetched in ${t}ms.`),M._log.debug("Ads: Ad server initialized.")})).catch((e=>Promise.reject((0,n.h4)(e,"_initializeAdSever"))))}))}_parsePrebidConfig(e){M._log.internalCall("_parsePrebidConfig"),this._prebidConfig.interstitial.code=this._aquaConfig.interstitial.slotID,this._prebidConfig.rewarded.code=this._aquaConfig.rewarded.slotID,e.ads.forEach((e=>{if("aqua"!=e.code&&"afg"!=e.code&&"wortal"!=e.code){const t={bidder:e.code,params:e.settings};"interstitial"==e.ad_type?this._prebidConfig.interstitial.bids.push(t):"rewarded"==e.ad_type&&this._prebidConfig.rewarded.bids.push(t)}})),M._log.debug("Ads: Bidders parsed.",this._prebidConfig)}_parsePrebidNoFillFallbackConfig(e){M._log.internalCall("_prebidNoFillFallbackConfig"),this._prebidNoFillFallbackConfig.interstitial.code=this._aquaConfig.interstitial.slotID,this._prebidNoFillFallbackConfig.rewarded.code=this._aquaConfig.rewarded.slotID,e.ads.forEach((e=>{if("wortal"==e.code){const t={bidder:e.code,params:e.settings};"interstitial"==e.ad_type?this._prebidNoFillFallbackConfig.interstitial.bids.push(t):"rewarded"==e.ad_type&&this._prebidNoFillFallbackConfig.rewarded.bids.push(t)}})),M._log.debug("Ads: Fallback Bidders parsed.",this._prebidNoFillFallbackConfig)}_parseAquaConfig(e){M._log.internalCall("_parseAquaConfig");const t=e.settings;if("object"!=typeof t||!("id"in t)||!("zoneId"in t))throw(0,n.h4)("Aqua ad settings are not valid.","_parseAquaConfig");if(!(0,s.Qh)(t.id))throw(0,n.h4)("Aqua ad ID is not valid.","_parseAquaConfig");if(!(0,s.Qh)(t.zoneId))throw(0,n.h4)("Aqua ad zone ID is not valid.","_parseAquaConfig");"interstitial"==e.ad_type?(this._aquaConfig.interstitial.settings.id=t.id,this._aquaConfig.interstitial.settings.zoneId=t.zoneId,M._log.debug("Ads: Aqua interstitial config parsed.",this._aquaConfig.interstitial)):"rewarded"==e.ad_type&&(this._aquaConfig.rewarded.settings.id=t.id,this._aquaConfig.rewarded.settings.zoneId=t.zoneId,M._log.debug("Ads: Aqua rewarded config parsed.",this._aquaConfig.rewarded))}_parseAFGConfig(e){var t,a,i,o,r;M._log.internalCall("_parseAFGConfig");const l=e.settings;if("object"!=typeof l||!("clientId"in l))throw(0,n.h4)("AFG ad settings are not valid.","_parseAFGConfig");if(!(0,s.Qh)(l.clientId))throw(0,n.h4)("AFG client ID is not valid.","_parseAFGConfig");(0,s.Qh)(l.channelId)||M._log.warn('Configuration "channelid" missing. Using default value. If testing in the Wortal dashboard than this can be safely ignored.'),(0,s.Qh)(l.hostId)||M._log.warn('Configuration "hostid" missing. Using default value. If testing in the Wortal dashboard than this can be safely ignored.'),this._afgConfig.clientID=l.clientId,this._afgConfig.channelID=null!==(t=l.channelId)&&void 0!==t?t:"",this._afgConfig.hostID=null!==(a=l.hostId)&&void 0!==a?a:"",this._afgConfig.channelHostID=null!==(i=l.channelHostId)&&void 0!==i?i:"",this._afgConfig.pageURL=null!==(o=l.pageUrl)&&void 0!==o?o:window.location.href,this._afgConfig.isDebugMode=null!==(r=l.debug)&&void 0!==r&&r,M._log.debug("Ads: AFG config parsed.",this._afgConfig)}_parseSandboxConfig(e){M._log.internalCall("_parseSandboxConfig"),this._prebidConfig.isDebugMode=!0,this._afgConfig.isDebugMode=!0,e.ads=e.ads.filter((e=>"wortal"===e.code)),this._parsePrebidNoFillFallbackConfig(e),M._log.debug("Ads: Sandbox mode enabled.")}_parseNoFillFallbackConfig(e){M._log.internalCall("_parseFallbackConfig"),e.ads=e.ads.filter((e=>"wortal"===e.code)),this._parsePrebidNoFillFallbackConfig(e),M._log.debug("Ads: Fallback mode enabled.")}_initializePrebid(){return M._log.internalCall("_initializePrebid"),new Promise(((e,t)=>{const a=document.createElement("script");a.src=i.Oj.PREBID,a.onload=()=>{window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],this._prebidConfig.isEnabled=!0,M._log.debug("Ads: Prebid SDK loaded."),e()},a.onerror=()=>{this._prebidConfig.isEnabled=!1,e()},document.head.appendChild(a)}))}_initializeAqua(){return M._log.internalCall("_initializeAqua"),new Promise(((e,t)=>{const a=document.createElement("script");a.src=i.Oj.AQUA_SEVER,a.onload=()=>{this._aquaConfig.isEnabled=!0,M._log.debug("Ads: Aqua SDK loaded."),e()},a.onerror=()=>{this._aquaConfig.isEnabled=!1,e()},document.head.appendChild(a)}))}_initializeAFG(){return M._log.internalCall("_initializeAFG"),new Promise((e=>{const t=document.createElement("script");if(t.setAttribute("src",i.Oj.AFG),t.setAttribute("type","text/javascript"),this._afgConfig.isDebugMode)t.setAttribute("data-ad-client","ca-pub-123456789"),t.setAttribute("data-adbreak-test","on");else if(t.setAttribute("data-ad-client",this._afgConfig.clientID),t.setAttribute("data-ad-frequency-hint",this._afgConfig.frequencyCap),t.setAttribute("data-page-url",this._afgConfig.pageURL),t.setAttribute("data-ad-channel",this._afgConfig.channelID),t.setAttribute("data-ad-host",this._afgConfig.hostID),(0,s.Qh)(this._afgConfig.hostID)){const e=document.createElement("meta");e.setAttribute("name","google-adsense-platform-account"),e.setAttribute("content",this._afgConfig.hostID),t.setAttribute("data-ad-host-channel",this._afgConfig.channelHostID),document.head.appendChild(e)}t.onload=()=>{window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.adsbygoogle=window.adsbygoogle||[],window.adBreak=window.adConfig=function(e){window.adsbygoogle.push(e)},window.adConfig({preloadAdBreaks:"on"}),this._afgConfig.isEnabled=!0,M._log.debug("Ads: AFG SDK loaded."),e()},t.onerror=()=>{this._afgConfig.isEnabled=!1,M._log.warn("Ad blocker detected. AFG SDK failed to load."),e()},document.head.appendChild(t)}))}_initializeSandbox(){return M._log.internalCall("_initializeSandbox"),this._initializePrebid().then((()=>this._initializePrebidNoFillFallback())).then((()=>{M._log.debug("Ads: Sandbox initialized.")})).catch((e=>{throw(0,n.h4)(e,"_initializeSandbox")}))}_initializePrebidNoFillFallback(){return M._log.internalCall("_initializePrebidNoFillFallback"),this._prebidConfig.isEnabled?(M._log.debug("Ads: Prebid no fill fallback initialized."),this._prebidNoFillFallbackConfig.isEnabled=!0,Promise.resolve()):Promise.all([this._initializePrebid()]).then((()=>{M._log.debug("Ads: Prebid no fill fallback initialized."),this._prebidNoFillFallbackConfig.isEnabled=!0})).catch((e=>{throw this._prebidNoFillFallbackConfig.isEnabled=!1,(0,n.h4)(e,"_initializePrebidNoFillFallback")}))}}var m=a(1212),p=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class A extends m.p{constructor(){super(),this._xsollaConfig={wortalGameID:0,projectID:0,loginProjectID:"",jwtToken:""},this._lastOperationID="",this._timeoutID=0,this._getXsollaConfig().catch((e=>{M._log.exception("Failed to fetch Xsolla config.",e)}))}set _operationID(e){clearTimeout(this._timeoutID),this._lastOperationID=e,this._timeoutID=window.setTimeout((()=>{this._lastOperationID=""}),18e4)}get token(){return this._xsollaConfig.jwtToken}set token(e){this._xsollaConfig.jwtToken=e}get projectID(){return this._xsollaConfig.projectID}_loginAsyncImpl(e){const t=e.method;return"password"===t?this._loginWithUsernameAsync(e):"email"===t?this._startLoginWithEmailAsync(e):"phone"===t?this._startLoginWithPhoneAsync(e):Promise.reject((0,n.pP)(`Unsupported login method: ${t}`,"_loginAsyncImpl"))}_confirmAsyncImpl(e){const t=e.method;return"email"===t?this._completeLoginWithEmailAsync(e):"phone"===t?this._completeLoginWithPhoneAsync(e):Promise.reject((0,n.pP)(`Unsupported confirmation method: ${t}`,"_confirmAsyncImpl"))}_logoutAsyncImpl(){throw new Error("Method not implemented.")}_registerAsyncImpl(e){const t=e.method;return"password"===t?this._registerWithUsernameAsync(e):Promise.reject((0,n.pP)(`Unsupported registration method: ${t}`,"_registerAsyncImpl"))}_resetPasswordAsyncImpl(e){throw new Error("Method not implemented.")}_registerWithUsernameAsync(e){return p(this,void 0,void 0,(function*(){const t=this._getBaseURL(e),a={projectId:this._xsollaConfig.loginProjectID},i=new URLSearchParams;Object.entries(a).forEach((([e,t])=>{i.append(e,t.toString())}));const s=new URL(`${t}/register`);s.search=i.toString();const o={username:e.username,password:e.password,email:e.email};try{const e=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});return 200===e.status?(M._log.warn("User registered without email verification. This is not recommended."),{status:"success"}):204===e.status?{status:"pending"}:((0,n.pP)(`Failed to register user: ${e.status} ${e.statusText}`,"_registerWithUsernameAsync"),{status:"error"})}catch(e){return Promise.reject((0,n.pP)(`Failed to register user: ${e.message}`,"_registerWithUsernameAsync"))}}))}_loginWithUsernameAsync(e){return p(this,void 0,void 0,(function*(){var t;const a=this._getBaseURL(e),i={projectId:this._xsollaConfig.loginProjectID},s=new URLSearchParams;Object.entries(i).forEach((([e,t])=>{s.append(e,t.toString())}));const o=new URL(`${a}/login`);o.search=s.toString();const r={username:e.email,password:e.password,remember_me:null!==(t=e.rememberMe)&&void 0!==t&&t};try{const e=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(200===e.status){const t=yield e.json(),a=this._parseXsollaToken(t.login_url);return M._internalAuth.isLoggedIn=!0,{status:"success",token:a||""}}return(0,n.pP)(`Failed to log in user: ${e.status} ${e.statusText}`,"_loginWithUsernameAsync"),{status:"error"}}catch(e){return Promise.reject((0,n.pP)(`Failed to log in user: ${e.message}`,"_loginWithUsernameAsync"))}}))}_startLoginWithEmailAsync(e){return p(this,void 0,void 0,(function*(){const t=this._getBaseURL(e),a={projectId:this._xsollaConfig.loginProjectID},i=new URLSearchParams;Object.entries(a).forEach((([e,t])=>{i.append(e,t.toString())}));const s=new URL(`${t}/login/email/request`);s.search=i.toString();const o={email:e.email};try{const e=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(200===e.status){const t=(yield e.json()).operation_id;return t?(this._operationID=t,{status:"pending"}):((0,n.pP)("Failed to start login with email: No operation ID returned.","_startLoginWithEmailAsync"),{status:"error"})}return(0,n.pP)(`Failed to log in user: ${e.status} ${e.statusText}`,"_startLoginWithEmailAsync"),{status:"error"}}catch(e){return Promise.reject((0,n.pP)(`Failed to log in user: ${e.message}`,"_startLoginWithEmailAsync"))}}))}_startLoginWithPhoneAsync(e){return p(this,void 0,void 0,(function*(){const t=this._getBaseURL(e),a={projectId:this._xsollaConfig.loginProjectID},i=new URLSearchParams;Object.entries(a).forEach((([e,t])=>{i.append(e,t.toString())}));const s=new URL(`${t}/login/phone/request`);s.search=i.toString();const o={phone_number:e.phone};try{const e=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(200===e.status){const t=(yield e.json()).operation_id;return t?(this._operationID=t,{status:"pending"}):((0,n.pP)("Failed to start login with phone: No operation ID returned.","_startLoginWithPhoneAsync"),{status:"error"})}return(0,n.pP)(`Failed to log in user: ${e.status} ${e.statusText}`,"_startLoginWithPhoneAsync"),{status:"error"}}catch(e){return Promise.reject((0,n.pP)(`Failed to log in user: ${e.message}`,"_startLoginWithPhoneAsync"))}}))}_completeLoginWithEmailAsync(e){return p(this,void 0,void 0,(function*(){const t=this._getBaseURL(e),a={projectId:this._xsollaConfig.loginProjectID},i=new URLSearchParams;Object.entries(a).forEach((([e,t])=>{i.append(e,t.toString())}));const o=new URL(`${t}/login/email/confirm`);o.search=i.toString();const r={code:e.code,email:e.email,operation_id:this._lastOperationID};if(!(0,s.Qh)(this._lastOperationID))return(0,n.pP)("Failed to complete login with email: No operation ID found. This likely means the confirmation code has expired. Code lifetime is 3 minutes.","_completeLoginWithEmailAsync"),{status:"error"};try{const e=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(200===e.status){const t=yield e.json(),a=this._parseXsollaToken(t.login_url);return M._internalAuth.isLoggedIn=!0,{status:"success",token:a||""}}return(0,n.pP)(`Failed to log in user: ${e.status} ${e.statusText}`,"_completeLoginWithEmailAsync"),{status:"error"}}catch(e){return Promise.reject((0,n.pP)(`Failed to log in user: ${e.message}`,"_completeLoginWithEmailAsync"))}}))}_completeLoginWithPhoneAsync(e){return p(this,void 0,void 0,(function*(){const t=this._getBaseURL(e),a={projectId:this._xsollaConfig.loginProjectID},i=new URLSearchParams;Object.entries(a).forEach((([e,t])=>{i.append(e,t.toString())}));const o=new URL(`${t}/login/phone/confirm`);o.search=i.toString();const r={code:e.code,phone_number:e.phone,operation_id:this._lastOperationID};if(!(0,s.Qh)(this._lastOperationID))return(0,n.pP)("Failed to complete login with email: No operation ID found. This likely means the confirmation code has expired. Code lifetime is 3 minutes.","_completeLoginWithPhoneAsync"),{status:"error"};try{const e=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(200===e.status){const t=yield e.json(),a=this._parseXsollaToken(t.login_url);return M._internalAuth.isLoggedIn=!0,{status:"success",token:a||""}}return(0,n.pP)(`Failed to log in user: ${e.status} ${e.statusText}`,"_completeLoginWithPhoneAsync"),{status:"error"}}catch(e){return Promise.reject((0,n.pP)(`Failed to log in user: ${e.message}`,"_completeLoginWithPhoneAsync"))}}))}_getBaseURL(e){var t;return"oauth2"===(null!==(t=e.protocol)&&void 0!==t?t:"jwt")?i.Sn.XSOLLA_LOGIN_OAUTH2:i.Sn.XSOLLA_LOGIN_JWT}_getXsollaConfig(){return p(this,void 0,void 0,(function*(){M._internalIsAPIInitialized||(yield(0,u.N_)((()=>M._internalIsAPIInitialized),"Auth: Waiting for APIs to initialize.."));const e=M.session._internalSession.gameID;try{const t=yield fetch(`${i.Sn.WORTAL_XSOLLA_CONFIG}?game=${e}&platform=${M._internalPlatform}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(200!==t.status)return Promise.reject((0,n.pP)(`Failed to fetch Xsolla config: ${t.status} ${t.statusText}`,"_getXsollaConfig"));const a=yield t.json();this._xsollaConfig.wortalGameID=a.wortalGameID,this._xsollaConfig.projectID=a.xsollaProjectID||0,this._xsollaConfig.loginProjectID=a.xsollaLoginProjectID||"",M._log.debug("Fetched Xsolla config.")}catch(e){return Promise.reject((0,n.pP)(`Failed to fetch Xsolla config: ${e.message}`,"_getXsollaConfig"))}}))}_parseXsollaToken(e){const t=new URL(e).searchParams.get("token");return t?(this._xsollaConfig.jwtToken=t,t):(M._log.warn("No Xsolla token found in callback URL."),"")}}var S=a(9745),y=a(5026),f=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class E extends y.a{initialize(){return f(this,void 0,void 0,(function*(){try{M._log.debug("Player: Fetching ASID...");const e=yield M.player.getASIDAsync();this._data.asid=e,M._log.debug("Player: ASID fetched: ",e),this._data.id=M._internalPlatformSDK.player.getID(),this._data.name=M._internalPlatformSDK.player.getName(),this._data.photo=M._internalPlatformSDK.player.getPhoto(),this._data.isFirstPlay=!1,M._log.debug("Player initialized: ",this._data)}catch(e){return M._log.exception("Player: Error fetching ASID: ",e),Promise.reject(e)}}))}}var w=a(7426),b=a(7190);class T{constructor(){this._data={levelName:"",levelTimer:0,levelTimerHandle:0,gameLoadTimer:0}}get gameLoadTimer(){return this._data.gameLoadTimer}startGameLoadTimer(){this._data.gameLoadTimer=performance.now()}stopGameLoadTimer(){this._data.gameLoadTimer=performance.now()-this._data.gameLoadTimer}get levelName(){return this._data.levelName}setLevelName(e){this._data.levelName=e}get levelTimer(){return this._data.levelTimer}resetLevelTimer(){this._data.levelTimer=0}startLevelTimer(){this._data.levelTimerHandle=window.setInterval((()=>this._data.levelTimer+=1),1e3)}clearLevelTimerHandle(){null!==this._data.levelTimerHandle&&clearInterval(this._data.levelTimerHandle),this._data.levelTimerHandle=0}}const C=JSON.parse('{"Andorra":"Andorra","Dubai":"United Arab Emirates","Kabul":"Afghanistan","Tirane":"Albania","Yerevan":"Armenia","Casey":"Antarctica","Davis":"Antarctica","Mawson":"Antarctica","Palmer":"Antarctica","Rothera":"Antarctica","Troll":"Antarctica","Vostok":"Antarctica","Buenos_Aires":"Argentina","Cordoba":"Argentina","Salta":"Argentina","Jujuy":"Argentina","Tucuman":"Argentina","Catamarca":"Argentina","La_Rioja":"Argentina","San_Juan":"Argentina","Mendoza":"Argentina","San_Luis":"Argentina","Rio_Gallegos":"Argentina","Ushuaia":"Argentina","Pago_Pago":"Samoa (American)","Vienna":"Austria","Lord_Howe":"Australia","Macquarie":"Australia","Hobart":"Australia","Melbourne":"Australia","Sydney":"Australia","Broken_Hill":"Australia","Brisbane":"Australia","Lindeman":"Australia","Adelaide":"Australia","Darwin":"Australia","Perth":"Australia","Eucla":"Australia","Baku":"Azerbaijan","Barbados":"Barbados","Dhaka":"Bangladesh","Brussels":"Belgium","Sofia":"Bulgaria","Bermuda":"Bermuda","Brunei":"Brunei","La_Paz":"Bolivia","Noronha":"Brazil","Belem":"Brazil","Fortaleza":"Brazil","Recife":"Brazil","Araguaina":"Brazil","Maceio":"Brazil","Bahia":"Brazil","Sao_Paulo":"Brazil","Campo_Grande":"Brazil","Cuiaba":"Brazil","Santarem":"Brazil","Porto_Velho":"Brazil","Boa_Vista":"Brazil","Manaus":"Brazil","Eirunepe":"Brazil","Rio_Branco":"Brazil","Thimphu":"Bhutan","Minsk":"Belarus","Belize":"Belize","St_Johns":"Canada","Halifax":"Canada","Glace_Bay":"Canada","Moncton":"Canada","Goose_Bay":"Canada","Toronto":"Canada","Nipigon":"Canada","Thunder_Bay":"Canada","Iqaluit":"Canada","Pangnirtung":"Canada","Winnipeg":"Canada","Rainy_River":"Canada","Resolute":"Canada","Rankin_Inlet":"Canada","Regina":"Canada","Swift_Current":"Canada","Edmonton":"Canada","Cambridge_Bay":"Canada","Yellowknife":"Canada","Inuvik":"Canada","Dawson_Creek":"Canada","Fort_Nelson":"Canada","Whitehorse":"Canada","Dawson":"Canada","Vancouver":"Canada","Cocos":"Cocos (Keeling) Islands","Zurich":"Switzerland","Abidjan":"Côte d\'Ivoire","Rarotonga":"Cook Islands","Santiago":"Chile","Punta_Arenas":"Chile","Easter":"Chile","Shanghai":"China","Urumqi":"China","Bogota":"Colombia","Costa_Rica":"Costa Rica","Havana":"Cuba","Cape_Verde":"Cape Verde","Christmas":"Christmas Island","Nicosia":"Cyprus","Famagusta":"Cyprus","Prague":"Czech Republic","Berlin":"Germany","Copenhagen":"Denmark","Santo_Domingo":"Dominican Republic","Algiers":"Algeria","Guayaquil":"Ecuador","Galapagos":"Ecuador","Tallinn":"Estonia","Cairo":"Egypt","El_Aaiun":"Western Sahara","Madrid":"Spain","Ceuta":"Spain","Canary":"Spain","Helsinki":"Finland","Fiji":"Fiji","Stanley":"Falkland Islands","Chuuk":"Micronesia","Pohnpei":"Micronesia","Kosrae":"Micronesia","Faroe":"Faroe Islands","Paris":"France","London":"Britain (UK)","Tbilisi":"Georgia","Cayenne":"French Guiana","Gibraltar":"Gibraltar","Nuuk":"Greenland","Danmarkshavn":"Greenland","Scoresbysund":"Greenland","Thule":"Greenland","Athens":"Greece","South_Georgia":"South Georgia & the South Sandwich Islands","Guatemala":"Guatemala","Guam":"Guam","Bissau":"Guinea-Bissau","Guyana":"Guyana","Hong_Kong":"Hong Kong","Tegucigalpa":"Honduras","Port-au-Prince":"Haiti","Budapest":"Hungary","Jakarta":"Indonesia","Pontianak":"Indonesia","Makassar":"Indonesia","Jayapura":"Indonesia","Dublin":"Ireland","Jerusalem":"Israel","Kolkata":"India","Chagos":"British Indian Ocean Territory","Baghdad":"Iraq","Tehran":"Iran","Reykjavik":"Iceland","Rome":"Italy","Jamaica":"Jamaica","Amman":"Jordan","Tokyo":"Japan","Nairobi":"Kenya","Bishkek":"Kyrgyzstan","Tarawa":"Kiribati","Kanton":"Kiribati","Kiritimati":"Kiribati","Pyongyang":"Korea (North)","Seoul":"Korea (South)","Almaty":"Kazakhstan","Qyzylorda":"Kazakhstan","Qostanay":"Kazakhstan","Aqtobe":"Kazakhstan","Aqtau":"Kazakhstan","Atyrau":"Kazakhstan","Oral":"Kazakhstan","Beirut":"Lebanon","Colombo":"Sri Lanka","Monrovia":"Liberia","Vilnius":"Lithuania","Luxembourg":"Luxembourg","Riga":"Latvia","Tripoli":"Libya","Casablanca":"Morocco","Monaco":"Monaco","Chisinau":"Moldova","Majuro":"Marshall Islands","Kwajalein":"Marshall Islands","Yangon":"Myanmar (Burma)","Ulaanbaatar":"Mongolia","Hovd":"Mongolia","Choibalsan":"Mongolia","Macau":"Macau","Martinique":"Martinique","Malta":"Malta","Mauritius":"Mauritius","Maldives":"Maldives","Mexico_City":"Mexico","Cancun":"Mexico","Merida":"Mexico","Monterrey":"Mexico","Matamoros":"Mexico","Mazatlan":"Mexico","Chihuahua":"Mexico","Ojinaga":"Mexico","Hermosillo":"Mexico","Tijuana":"Mexico","Bahia_Banderas":"Mexico","Kuala_Lumpur":"Malaysia","Kuching":"Malaysia","Maputo":"Mozambique","Windhoek":"Namibia","Noumea":"New Caledonia","Norfolk":"Norfolk Island","Lagos":"Nigeria","Managua":"Nicaragua","Amsterdam":"Netherlands","Oslo":"Norway","Kathmandu":"Nepal","Nauru":"Nauru","Niue":"Niue","Auckland":"New Zealand","Chatham":"New Zealand","Panama":"Panama","Lima":"Peru","Tahiti":"French Polynesia","Marquesas":"French Polynesia","Gambier":"French Polynesia","Port_Moresby":"Papua New Guinea","Bougainville":"Papua New Guinea","Manila":"Philippines","Karachi":"Pakistan","Warsaw":"Poland","Miquelon":"St Pierre & Miquelon","Pitcairn":"Pitcairn","Puerto_Rico":"Puerto Rico","Gaza":"Palestine","Hebron":"Palestine","Lisbon":"Portugal","Madeira":"Portugal","Azores":"Portugal","Palau":"Palau","Asuncion":"Paraguay","Qatar":"Qatar","Reunion":"Réunion","Bucharest":"Romania","Belgrade":"Serbia","Kaliningrad":"Russia","Moscow":"Russia","Simferopol":"Russia","Kirov":"Russia","Volgograd":"Russia","Astrakhan":"Russia","Saratov":"Russia","Ulyanovsk":"Russia","Samara":"Russia","Yekaterinburg":"Russia","Omsk":"Russia","Novosibirsk":"Russia","Barnaul":"Russia","Tomsk":"Russia","Novokuznetsk":"Russia","Krasnoyarsk":"Russia","Irkutsk":"Russia","Chita":"Russia","Yakutsk":"Russia","Khandyga":"Russia","Vladivostok":"Russia","Ust-Nera":"Russia","Magadan":"Russia","Sakhalin":"Russia","Srednekolymsk":"Russia","Kamchatka":"Russia","Anadyr":"Russia","Riyadh":"Saudi Arabia","Guadalcanal":"Solomon Islands","Mahe":"Seychelles","Khartoum":"Sudan","Stockholm":"Sweden","Singapore":"Singapore","Paramaribo":"Suriname","Juba":"South Sudan","Sao_Tome":"Sao Tome & Principe","El_Salvador":"El Salvador","Damascus":"Syria","Grand_Turk":"Turks & Caicos Is","Ndjamena":"Chad","Kerguelen":"French Southern & Antarctic Lands","Bangkok":"Thailand","Dushanbe":"Tajikistan","Fakaofo":"Tokelau","Dili":"East Timor","Ashgabat":"Turkmenistan","Tunis":"Tunisia","Tongatapu":"Tonga","Istanbul":"Turkey","Funafuti":"Tuvalu","Taipei":"Taiwan","Kiev":"Ukraine","Uzhgorod":"Ukraine","Zaporozhye":"Ukraine","Wake":"US minor outlying islands","New_York":"United States","Detroit":"United States","Louisville":"United States","Monticello":"United States","Indianapolis":"United States","Vincennes":"United States","Winamac":"United States","Marengo":"United States","Petersburg":"United States","Vevay":"United States","Chicago":"United States","Tell_City":"United States","Knox":"United States","Menominee":"United States","Center":"United States","New_Salem":"United States","Beulah":"United States","Denver":"United States","Boise":"United States","Phoenix":"United States","Los_Angeles":"United States","Anchorage":"United States","Juneau":"United States","Sitka":"United States","Metlakatla":"United States","Yakutat":"United States","Nome":"United States","Adak":"United States","Honolulu":"United States","Montevideo":"Uruguay","Samarkand":"Uzbekistan","Tashkent":"Uzbekistan","Caracas":"Venezuela","Ho_Chi_Minh":"Vietnam","Efate":"Vanuatu","Wallis":"Wallis & Futuna","Apia":"Samoa (western)","Johannesburg":"South Africa","Antigua":"Antigua & Barbuda","Anguilla":"Anguilla","Luanda":"Angola","McMurdo":"Antarctica","DumontDUrville":"Antarctica","Syowa":"Antarctica","Aruba":"Aruba","Mariehamn":"Åland Islands","Sarajevo":"Bosnia & Herzegovina","Ouagadougou":"Burkina Faso","Bahrain":"Bahrain","Bujumbura":"Burundi","Porto-Novo":"Benin","St_Barthelemy":"St Barthelemy","Kralendijk":"Caribbean NL","Nassau":"Bahamas","Gaborone":"Botswana","Blanc-Sablon":"Canada","Atikokan":"Canada","Creston":"Canada","Kinshasa":"Congo (Dem. Rep.)","Lubumbashi":"Congo (Dem. Rep.)","Bangui":"Central African Rep.","Brazzaville":"Congo (Rep.)","Douala":"Cameroon","Curacao":"Curaçao","Busingen":"Germany","Djibouti":"Djibouti","Dominica":"Dominica","Asmara":"Eritrea","Addis_Ababa":"Ethiopia","Libreville":"Gabon","Grenada":"Grenada","Guernsey":"Guernsey","Accra":"Ghana","Banjul":"Gambia","Conakry":"Guinea","Guadeloupe":"Guadeloupe","Malabo":"Equatorial Guinea","Zagreb":"Croatia","Isle_of_Man":"Isle of Man","Jersey":"Jersey","Phnom_Penh":"Cambodia","Comoro":"Comoros","St_Kitts":"St Kitts & Nevis","Kuwait":"Kuwait","Cayman":"Cayman Islands","Vientiane":"Laos","St_Lucia":"St Lucia","Vaduz":"Liechtenstein","Maseru":"Lesotho","Podgorica":"Montenegro","Marigot":"St Martin (French)","Antananarivo":"Madagascar","Skopje":"North Macedonia","Bamako":"Mali","Saipan":"Northern Mariana Islands","Nouakchott":"Mauritania","Montserrat":"Montserrat","Blantyre":"Malawi","Niamey":"Niger","Muscat":"Oman","Kigali":"Rwanda","St_Helena":"St Helena","Ljubljana":"Slovenia","Longyearbyen":"Svalbard & Jan Mayen","Bratislava":"Slovakia","Freetown":"Sierra Leone","San_Marino":"San Marino","Dakar":"Senegal","Mogadishu":"Somalia","Lower_Princes":"St Maarten (Dutch)","Mbabane":"Eswatini (Swaziland)","Lome":"Togo","Port_of_Spain":"Trinidad & Tobago","Dar_es_Salaam":"Tanzania","Kampala":"Uganda","Midway":"US minor outlying islands","Vatican":"Vatican City","St_Vincent":"St Vincent","Tortola":"Virgin Islands (UK)","St_Thomas":"Virgin Islands (US)","Aden":"Yemen","Mayotte":"Mayotte","Lusaka":"Zambia","Harare":"Zimbabwe"}');var I=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class P{constructor(){this._data={sessionID:"",country:"",gameID:"",browser:"",timerID:"",timePlayed:0,orientation:"portrait",legacyGameID:"",source:"",isSandbox:!1,setupForMobile:!1,heartbeatStop:!1},this._locale=navigator.language,this._isAudioEnabled=!0,M._log.status("Session: Initializing session..."),this._data.sessionID=(0,u.lk)(),this._data.country=this._setCountry(),this._data.gameID=this._setGameID(),this._data.browser=navigator.userAgent,this._data.orientation=this._setOrientation(),this._data.legacyGameID=window.legacyGameID||"",this._data.source=this._setSource(),"gd"!==M._internalPlatform&&"gamemonetize"!==M._internalPlatform||(this._externalCallbacks={}),this._startSessionTimer(),M._log.debug("Session: Session initialized: ",this._data)}get gameID(){return this._data.gameID}get browser(){return this._data.browser}get country(){return this._data.country}get locale(){return this._locale}set locale(e){this._locale=e}get sessionID(){return this._data.sessionID}get timePlayed(){return this._data.timePlayed}get orientation(){return this._data.orientation}set orientation(e){this._data.orientation=e}get legacyGameID(){return this._data.legacyGameID}get externalCallbacks(){return this._externalCallbacks}get isAudioEnabled(){return this._isAudioEnabled}get source(){return this._data.source}get isSandbox(){return this._data.isSandbox}set isSandbox(e){this._data.isSandbox=e}get setupForMobile(){return this._data.setupForMobile}set setupForMobile(e){this._data.setupForMobile=e}set isAudioEnabled(e){this._isAudioEnabled=e,u.bP.forEach((t=>t(e)))}get heartbeatStop(){return this._data.heartbeatStop}_startSessionTimer(){this._data.timerID=(0,u.lk)(),setInterval((()=>{"visible"===document.visibilityState&&(this._data.timePlayed+=1)}),1e3),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this._data.timePlayed>10&&(M.analytics._logGameEnd()?M.session._storeSessionData(!0):M.session._storeSessionData(),this._resetSessionTimer())}))}_resetSessionTimer(){this._data.timerID=(0,u.lk)(),this._data.timePlayed=0}_setGameID(){const e=window.wortalGameID;if(null==e)throw(0,n.h4)("Game ID is not defined.","gameID");return M._log.debug("Game ID: "+e),e}_setCountry(){const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(void 0===e)return M._log.debug("Session: Could not get time zone, defaulting to unknown."),"unknown";const t=e.split("/"),a=t[t.length-1];return C[a]}_setOrientation(){if(!screen||!screen.orientation||!screen.orientation.type)return M._log.warn("Session: Could not get screen orientation, defaulting to portrait."),"portrait";const e=screen.orientation.type;return"portrait-primary"===e||"portrait-secondary"===e?"portrait":"landscape-primary"===e||"landscape-secondary"===e?"landscape":"portrait"}_setSource(){return(0,u.Ez)("source")||""}_trackSessionServerSide(){return I(this,void 0,void 0,(function*(){try{const e={user_id:M.player.getID()||"",game_uid:this._data.gameID,platform:M._internalPlatform,session_id:this._data.sessionID},t=yield fetch(`${i.Sn.WORTAL_BASE_API}/game-session/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(200!==t.status&&201!=t.status)return Promise.reject((0,n.pP)(`Failed to track session server side: ${t.text}`,"_trackSessionServerSide"));M._log.debug("Session: tracked on server side."),this._startHeartbeat()}catch(e){return Promise.reject((0,n.pP)(`Failed to track session server side: ${e.message}`,"_trackSessionServerSide"))}}))}_sendHeartbeat(){return I(this,void 0,void 0,(function*(){try{const e=yield fetch(`${i.Sn.WORTAL_BASE_API}/game-session/heartbeat/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:this._data.sessionID})});if(200!=e.status)return Promise.reject((0,n.pP)(`Failed to received heartbeat: ${e.text}`,"_sendHeartbeat"))}catch(e){return Promise.reject((0,n.pP)(`Failed to received heartbeat: ${e.message}`,"_sendHeartbeat"))}}))}_startHeartbeat(){this._heartbeatInterval=setInterval((()=>I(this,void 0,void 0,(function*(){try{yield this._sendHeartbeat()}catch(e){this._handleHearbeatError()}}))),1e4)}_handleHearbeatError(){this._cleanHeartbeat();let e="Your session has expired because you are playing on another device or browser tab.";"ja"==this._locale&&(e="セッションの有効期限が切れました。別のデバイスまたはブラウザのタブでプレイしている可能性があります。"),(0,u.b6)(e)}_cleanHeartbeat(){this._heartbeatInterval&&(clearInterval(this._heartbeatInterval),this._heartbeatInterval=void 0),this._data.heartbeatStop=!0}}class N{constructor(){this._logPrefix=" Wortal ",this._callLogPrefix=" API ",this._internalCallLogPrefix=" INTERNAL ",this._performanceLogPrefix=" PERFORMANCE ",this._statusLogPrefix=" STATUS ",this._logTextStyle="font-weight: normal;",this._logPrefixStyle="\n    background: #8258A4;\n    border-radius: 5px;\n    color: white;\n    font-weight: bold;",this._logCallTagStyle="\n    background: #A45882;\n    border-radius: 5px;\n    color: white;\n    font-weight: bold;",this._logInternalTagStyle="\n    background: #5F5666;\n    border-radius: 5px;\n    color: white;\n    font-weight: bold;",this._logPerformanceTagStyle="\n    background: #75AA00;\n    border-radius: 5px;\n    color: white;\n    font-weight: bold;",this._logStatusTagStyle="\n    background: #007FFF;\n    border-radius: 5px;\n    color: white;\n    font-weight: bold;"}debug(e,t){console.debug(`%c${this._logPrefix}%c ${e}`,this._logPrefixStyle,this._logTextStyle,t)}info(e,t){console.info(`%c${this._logPrefix}%c ${e}`,this._logPrefixStyle,this._logTextStyle,t)}warn(e,t){console.warn(`%c${this._logPrefix}%c ${e}`,this._logPrefixStyle,this._logTextStyle,t),(0,u.CU)(i.DZ.SDK_WARNING,{message:e,args:t})}exception(e,t){console.error(`%c${this._logPrefix}%c ${e}`,this._logPrefixStyle,this._logTextStyle,t),(0,u.CU)(i.DZ.SDK_ERROR,{message:e,args:t})}status(e,t){console.debug(`%c${this._logPrefix}%c${this._statusLogPrefix}%c ${e}`,this._logPrefixStyle,this._logStatusTagStyle,this._logTextStyle,t),(0,u.CU)(i.DZ.SDK_STATUS,{message:e,args:t})}apiCall(e,t){console.debug(`%c${this._logPrefix}%c${this._callLogPrefix}%c ${e}`,this._logPrefixStyle,this._logCallTagStyle,this._logTextStyle,t),(0,u.CU)(i.DZ.SDK_API_CALL,{fn:e,args:t})}apiSuccess(e,t){(0,u.CU)(i.DZ.SDK_API_SUCCESS,{fn:e,args:t})}apiError(e,t){(0,u.CU)(i.DZ.SDK_API_ERROR,{fn:e,args:t})}internalCall(e,t){console.debug(`%c${this._logPrefix}%c${this._internalCallLogPrefix}%c ${e}`,this._logPrefixStyle,this._logInternalTagStyle,this._logTextStyle,t),(0,u.CU)(i.DZ.SDK_INTERNAL_CALL,{fn:e,args:t})}performanceLog(e,t){console.debug(`%c${this._logPrefix}%c${this._performanceLogPrefix}%c ${e}`,this._logPrefixStyle,this._logPerformanceTagStyle,this._logTextStyle,t),(0,u.CU)(i.DZ.SDK_PERFORMANCE,{message:e,args:t})}}var v=a(258),O=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class D extends y.a{constructor(e){super(),this._data={id:"",name:"",photo:"",isFirstPlay:!1,daysSinceFirstPlay:0};let t=localStorage.getItem("kantangame_generated_player_id");t||(t=(0,u.lk)(),localStorage.setItem("kantangame_generated_player_id",t)),this._data.id=(null==e?void 0:e.id)||t,this._data.name=(null==e?void 0:e.name)||"Player",this._data.photo=(null==e?void 0:e.photo)||"https://storage.googleapis.com/html5gameportal.com/images/avatar.jpg"}initialize(){return O(this,void 0,void 0,(function*(){return M._log.debug("Player initialized: ",this._data),this._data.isFirstPlay=this._isWortalFirstPlay(),M._log.debug("Player initialized: ",this._data),Promise.resolve(void 0)}))}_isWortalFirstPlay(){const e=this._getCookie(M.session._internalSession.gameID);return""!==e?(this._data.daysSinceFirstPlay=this._getTimeFromCookieCreation(e),!1):(this._setCookie(M.session._internalSession.gameID),!0)}_getCookie(e){var t;const a=("; "+document.cookie).split("; kantangame-"+e+"=");return 2===a.length&&(null===(t=a.pop())||void 0===t?void 0:t.split(";").shift())||""}_setCookie(e){const t="kantangame-"+e,a=(new Date).toISOString().slice(0,10),i=new Date;i.setTime(i.getTime()+31536e6),document.cookie=t+"="+a+"; expires="+i.toUTCString()+"; path=/"}_getTimeFromCookieCreation(e){const t=+e.substring(0,4),a=+e.substring(5,7)-1,i=+e.substring(8,10),n=Date.UTC(t,a,i),s=Date.now()-n;return Math.round(s/1e3/60/60/24)}}var R=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class L extends y.a{initialize(){return R(this,void 0,void 0,(function*(){var e;const t="mixi.jp"==(0,u.Ez)("oauth_consumer_key");t&&(M.session._internalSession.setupForMobile=!0);let a=null;try{t?(M.session._internalSession.setupForMobile=!0,a=yield this._getMixiMobilePlayer()):a=yield this._getMixiPlayer()}catch(e){M._log.exception("Error initializing Mixi player: ",e)}this._data.id=(null===(e=null==a?void 0:a.id)||void 0===e?void 0:e.toString())||(0,u.lk)(),this._data.name=(null==a?void 0:a.displayName)||"Player",this._data.photo=(null==a?void 0:a.thumbnailUrl)||"https://storage.googleapis.com/html5gameportal.com/images/avatar.jpg";return"pgfap4iko6fjr"==this._data.id&&(M.session._internalSession.isSandbox=!0),M._log.debug("Player initialized: ",this._data),Promise.resolve()}))}_getMixiPlayer(){return R(this,void 0,void 0,(function*(){try{window.parent.postMessage({action:i.ph.GET_PROFILE},"*");const e=e=>{const{action:t,data:a}=e.data;if(t===i.ph.GET_PROFILE){const{id:e,displayName:t,thumbnailUrl:i}=a;return console.log("Profile Received:",e,t,i),{id:e,displayName:t,thumbnailUrl:i}}if(t===i.ph.GET_PROFILE_ERROR)throw console.error("Error fetching profile:",a.code),new Error(`Error fetching profile: ${a.code}`)},t=yield(0,u.tr)(i.ph.GET_PROFILE,e);return{id:t.id,displayName:t.displayName,thumbnailUrl:t.thumbnailUrl}}catch(e){return M._log.exception("Error fetching Mixi player: ",e),Promise.reject(e)}}))}_getMixiMobilePlayer(){return R(this,void 0,void 0,(function*(){const e=(0,u.Ez)("opensocial_viewer_id")||"";if(!e)throw new Error("user id is not available");const t=`${i.Sn.WORTAL_BASE_API}/mixi/profile/?user_id=${e}&game=${window.wortalGameID}`,a=yield fetch(t,{method:"GET"});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);return yield a.json()}))}}var k=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class x extends y.a{initialize(){return k(this,void 0,void 0,(function*(){var e;"stg.game-tsutaya.tsite.jp"==window.location.host&&(M.session._internalSession.isSandbox=!0);let t=null;try{t=yield this._getProfile()}catch(e){return M._log.exception("Error initializing Tsutaya player: ",e),Promise.reject(`Failed to inintialize user: ${e}`)}return this._data.id=(null===(e=null==t?void 0:t.id)||void 0===e?void 0:e.toString())||(0,u.lk)(),this._data.name=(null==t?void 0:t.displayName)||"Player",this._data.photo=(null==t?void 0:t.thumbnailUrl)||"https://storage.googleapis.com/html5gameportal.com/images/avatar.jpg",M._log.debug("Player initialized: ",this._data),Promise.resolve()}))}_getProfile(){return k(this,void 0,void 0,(function*(){const e=(0,u.Ez)("opensocial_viewer_id")||"";if(!e)throw new Error("user id is not available");const t=M.session._internalSession.isSandbox,a=`${i.Sn.WORTAL_BASE_API}/tsutaya/profile/?user_id=${e}&game=${window.wortalGameID}&is_test=${t}`,n=yield fetch(a,{method:"GET"});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return yield n.json()}))}}var G=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};const U=new class{constructor(){this._isInitialized=!1,this._isAPIInitialized=!1,this._isPlatformInitialized=!1,this._platform="debug",this._log=new N,this.isInitialized=!1}get _internalPlatformSDK(){return this._platformSDK}set _internalPlatformSDK(e){this._platformSDK=e}get _internalPlatform(){return this._platform}get _internalIsAPIInitialized(){return this._isAPIInitialized}get _internalIsPlatformInitialized(){return this._isPlatformInitialized}get _internalAuth(){return this._core.auth}initializeAsync(){return G(this,void 0,void 0,(function*(){return void 0===this._core&&(yield(0,u.N_)((()=>void 0!==this._core),"Core: Core module not loaded. Waiting for it to load before calling initializeAsync...")),this._core.initializeAsync()}))}startGameAsync(){return G(this,void 0,void 0,(function*(){return this._core.startGameAsync()}))}authenticateAsync(e){return this._core.authenticateAsync(e)}linkAccountAsync(){return this._core.linkAccountAsync()}setLoadingProgress(e){this._core.setLoadingProgress(e)}onPause(e){this._core.onPause(e)}onResume(e){this._core.onResume(e)}performHapticFeedbackAsync(){return this._core.performHapticFeedbackAsync()}getSupportedAPIs(){return this._core.getSupportedAPIs()}_loadCoreAsync(e){return G(this,void 0,void 0,(function*(){if(this._log.internalCall("_loadCoreAsync"),this._isInitialized)return Promise.reject((0,n.h4)("SDK already initialized.","_loadCoreAsync"));this._log.info("Core: Initializing SDK 2.9.8"),this._platform=e.platform,this._log.debug("Core: Platform: "+this._platform);const t=performance.now();window.addEventListener("wortal-sdk-initialized",(()=>{const e=performance.now()-t;this._log.performanceLog(`Wortal SDK initialized in ${e}ms.`),this._log.apiSuccess("initializeAsync",{executionTime:e})}));try{this._log.status("Core: Loading chunks...");const e=performance.now();yield this._loadChunksAsync(this._platform);const t=performance.now()-e;this._log.performanceLog(`Chunks loaded in ${t}ms.`)}catch(e){return Promise.reject((0,n.h4)(`Failed to initialize SDK during loadChunksAsync: ${e.message}`,"_loadCoreAsync"))}try{this._log.status("Core: Loading APIs...");const e=performance.now();yield this._loadAPIsAsync(this._platform);const t=performance.now()-e;this._log.performanceLog(`APIs loaded in ${t}ms.`),this._isAPIInitialized=!0}catch(e){return Promise.reject((0,n.h4)(`Failed to initialize SDK during loadAPIsAsync: ${e.message}`,"_loadCoreAsync"))}this.session._gameLoadingStart(),(0,u.qe)(),(0,u.Pv)();try{this._log.status("Core: Initializing platform...");const e=performance.now();yield this._core._initializePlatformAsync();const t=performance.now()-e;this._log.performanceLog(`Platform initialized in ${t}ms.`)}catch(e){return Promise.reject((0,n.h4)(`Failed to initialize SDK during initializePlatformAsync: ${e.message}`,"_loadCoreAsync"))}return this._isPlatformInitialized=!0,this._log.debug("Core: Platform initialization finished, awaiting manual initialization.."),Promise.resolve()}))}_loadChunksAsync(e){return G(this,void 0,void 0,(function*(){this._log.internalCall("_loadChunksAsync");for(const t of i.yB)if(e===t)return this._log.debug("Core: Loading chunks locally for platform: "+e),Promise.resolve();let t;t=i.Sn.WORTAL_CHUNKS_PROD;const a=[],s=[];a.push("wortal-common.js"),a.push("wortal-shared.js"),a.push(`${e}.js`);for(const e of a)s.push(new Promise(((a,i)=>{const s=document.createElement("script");s.src=t+e,s.onload=()=>{a()},s.onerror=()=>{i((0,n.h4)(`Failed to load chunk: ${e}`,"_loadChunksAsync"))},document.head.appendChild(s)})));return Promise.all(s).then((()=>{}))}))}_loadAPIsAsync(e){return G(this,void 0,void 0,(function*(){this._log.internalCall("_loadAPIsAsync");const{AnalyticsWombat:t}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,1135)),{AnalyticsDisabled:i}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,5215)),{IAPXsolla:s}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,7562)),{AchievementsDisabled:o}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,2499)),{AuthDisabled:l}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,1407)),{ContextDisabled:c}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,9949)),{IAPDisabled:u}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,3507)),{LeaderboardDisabled:_}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,2857)),{NotificationsDisabled:m}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,5263)),{StatsDisabled:p}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,349)),{TournamentDisabled:f}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,7015)),{PlayerDefault:C}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,2858)),{SessionDefault:I}=yield Promise.all([a.e(666),a.e(82)]).then(a.bind(a,66));switch(e){case"addictinggames":{const{CoreAddictingGames:e}=yield Promise.all([a.e(666),a.e(945)]).then(a.bind(a,9361)),{AchievementsAddictingGames:i}=yield Promise.all([a.e(666),a.e(945)]).then(a.bind(a,8617)),{AdsAddictingGames:n}=yield Promise.all([a.e(666),a.e(945)]).then(a.bind(a,9801)),{PlayerAddictingGames:s}=yield Promise.all([a.e(666),a.e(945)]).then(a.bind(a,9653)),{SessionAddictingGames:o}=yield Promise.all([a.e(666),a.e(945)]).then(a.bind(a,2141)),{StatsAddictingGames:d}=yield Promise.all([a.e(666),a.e(945)]).then(a.bind(a,4231));this._core=new e(new l),this.achievements=new i,this.ads=new n(new r),this.analytics=new t,this.context=new c,this.iap=new u,this.leaderboard=new _,this.notifications=new m,this.player=new s(new y.a),this.session=new o(new T,new P),this.stats=new d,this.tournament=new f;break}case"crazygames":{const{CoreCrazyGames:e}=yield Promise.all([a.e(666),a.e(639)]).then(a.bind(a,9227)),{AdsCrazyGames:i}=yield Promise.all([a.e(666),a.e(639)]).then(a.bind(a,3171)),{ContextCrazyGames:n}=yield Promise.all([a.e(666),a.e(639)]).then(a.bind(a,7241)),{IAPXsolla:s}=yield Promise.all([a.e(666),a.e(639)]).then(a.bind(a,7562)),{PlayerCrazyGames:l}=yield Promise.all([a.e(666),a.e(639)]).then(a.bind(a,9735)),{SessionCrazyGames:d}=yield Promise.all([a.e(666),a.e(639)]).then(a.bind(a,9215));this._core=new e(new A),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new n,this.iap=new s,this.leaderboard=new _,this.notifications=new m,this.player=new l(new S.u),this.session=new d(new T,new P),this.stats=new p,this.tournament=new f;break}case"facebook":{const{CoreFacebook:e}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,8503)),{AdsFacebook:t}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,543)),{AnalyticsFacebook:i}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,1307)),{ContextFacebook:n}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,6169)),{IAPFacebook:s}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,3823)),{LeaderboardFacebook:r}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,3461)),{NotificationsFacebook:d}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,5691)),{PlayerFacebook:c}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,8747)),{SessionFacebook:u}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,1907)),{TournamentFacebook:_}=yield Promise.all([a.e(666),a.e(331)]).then(a.bind(a,7123));this._core=new e(new l),this.achievements=new o,this.ads=new t(new h),this.analytics=new i,this.context=new n,this.iap=new s,this.leaderboard=new r,this.notifications=new d,this.player=new c(new E),this.session=new u(new T,new P),this.stats=new p,this.tournament=new _;break}case"gamemonetize":{const{CoreGameMonetize:e}=yield Promise.all([a.e(666),a.e(88)]).then(a.bind(a,4762)),{AdsGameMonetize:i}=yield Promise.all([a.e(666),a.e(88)]).then(a.bind(a,8546));this._core=new e(new l),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new c,this.iap=new u,this.leaderboard=new _,this.notifications=new m,this.player=new C(new y.a),this.session=new I(new T,new P),this.stats=new p,this.tournament=new f;break}case"gamepix":{const{CoreGamePix:e}=yield Promise.all([a.e(666),a.e(596)]).then(a.bind(a,8728)),{AdsGamePix:t}=yield Promise.all([a.e(666),a.e(596)]).then(a.bind(a,7984)),{SessionGamePix:n}=yield Promise.all([a.e(666),a.e(596)]).then(a.bind(a,3220)),{StatsGamePix:s}=yield Promise.all([a.e(666),a.e(596)]).then(a.bind(a,9770));this._core=new e(new l),this.achievements=new o,this.ads=new t(new r),this.analytics=new i,this.context=new c,this.iap=new u,this.leaderboard=new _,this.notifications=new m,this.player=new C(new y.a),this.session=new n(new T,new P),this.stats=new s,this.tournament=new f;break}case"gamesnacks":{const{CoreGameSnacks:e}=yield Promise.all([a.e(666),a.e(240)]).then(a.bind(a,2066)),{AdsGameSnacks:t}=yield Promise.all([a.e(666),a.e(240)]).then(a.bind(a,3098)),{AnalyticsGameSnacks:i}=yield Promise.all([a.e(666),a.e(240)]).then(a.bind(a,1526)),{PlayerGameSnacks:n}=yield Promise.all([a.e(666),a.e(240)]).then(a.bind(a,8422)),{SessionGameSnacks:s}=yield Promise.all([a.e(666),a.e(240)]).then(a.bind(a,1726)),{StatsGameSnacks:d}=yield Promise.all([a.e(666),a.e(240)]).then(a.bind(a,2732));this._core=new e(new l),this.achievements=new o,this.ads=new t(new r),this.analytics=new i,this.context=new c,this.iap=new u,this.leaderboard=new _,this.notifications=new m,this.player=new n(new y.a),this.session=new s(new T,new P),this.stats=new d,this.tournament=new f;break}case"gd":{const{CoreGD:e}=yield Promise.all([a.e(666),a.e(98)]).then(a.bind(a,5024)),{AdsGD:t}=yield Promise.all([a.e(666),a.e(98)]).then(a.bind(a,1080));this._core=new e(new l),this.achievements=new o,this.ads=new t(new r),this.analytics=new i,this.context=new c,this.iap=new u,this.leaderboard=new _,this.notifications=new m,this.player=new C(new y.a),this.session=new I(new T,new P),this.stats=new p,this.tournament=new f;break}case"poki":{const{CorePoki:e}=yield Promise.all([a.e(666),a.e(272)]).then(a.bind(a,602)),{AdsPoki:i}=yield Promise.all([a.e(666),a.e(272)]).then(a.bind(a,7154)),{ContextPoki:n}=yield Promise.all([a.e(666),a.e(272)]).then(a.bind(a,8772)),{SessionPoki:s}=yield Promise.all([a.e(666),a.e(272)]).then(a.bind(a,1246));this._core=new e(new l),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new n,this.iap=new u,this.leaderboard=new _,this.notifications=new m,this.player=new C(new y.a),this.session=new s(new T,new P),this.stats=new p,this.tournament=new f;break}case"telegram":{const{CoreTelegram:e}=yield Promise.all([a.e(666),a.e(410)]).then(a.bind(a,2836)),{AdsTelegram:i}=yield Promise.all([a.e(666),a.e(410)]).then(a.bind(a,2956)),{LeaderboardTelegram:n}=yield Promise.all([a.e(666),a.e(410)]).then(a.bind(a,2634)),{PlayerTelegram:s}=yield Promise.all([a.e(666),a.e(410)]).then(a.bind(a,2818)),{SessionTelegram:r}=yield Promise.all([a.e(666),a.e(410)]).then(a.bind(a,8880)),{ContextTelegram:d}=yield Promise.all([a.e(666),a.e(410)]).then(a.bind(a,8494)),{IAPTelegram:c}=yield Promise.all([a.e(666),a.e(410)]).then(a.bind(a,7820));this._core=new e(new l),this.achievements=new o,this.ads=new i(new g),this.analytics=new t,this.context=new d,this.iap=new c,this.leaderboard=new n,this.notifications=new m,this.player=new s(new y.a),this.session=new r(new T,new P),this.stats=new p,this.tournament=new f;break}case"telegram-wortal":{const{CoreTelegramWortal:e}=yield Promise.all([a.e(666),a.e(308)]).then(a.bind(a,1652)),{AdsTelegramWortal:i}=yield Promise.all([a.e(666),a.e(308)]).then(a.bind(a,2940)),{LeaderboardTelegramWortal:n}=yield Promise.all([a.e(666),a.e(308)]).then(a.bind(a,2570)),{PlayerTelegramWortal:s}=yield Promise.all([a.e(666),a.e(308)]).then(a.bind(a,2102)),{SessionTelegram:r}=yield Promise.all([a.e(666),a.e(308)]).then(a.bind(a,8880)),{ContextTelegram:d}=yield Promise.all([a.e(666),a.e(308)]).then(a.bind(a,8494)),{IAPTelegramWortal:c}=yield Promise.all([a.e(666),a.e(308)]).then(a.bind(a,7804));this._core=new e(new l),this.achievements=new o,this.ads=new i(new g),this.analytics=new t,this.context=new d,this.iap=new c,this.leaderboard=new n,this.notifications=new m,this.player=new s(new y.a),this.session=new r(new T,new P),this.stats=new p,this.tournament=new f;break}case"wortal":{const{CoreWortal:e}=yield Promise.all([a.e(666),a.e(904)]).then(a.bind(a,477)),{AdsWortal:i}=yield Promise.all([a.e(666),a.e(904)]).then(a.bind(a,626)),{PlayerWortal:n}=yield Promise.all([a.e(666),a.e(904)]).then(a.bind(a,3790));this._core=new e(new A),this.achievements=new o,this.ads=new i(new g),this.analytics=new t,this.context=new c,this.iap=new s,this.leaderboard=new _,this.notifications=new m,this.player=new n(new w.F),this.session=new I(new T,new P),this.stats=new p,this.tournament=new f;break}case"wortal-native":{const{CoreWortalNative:e}=yield Promise.all([a.e(666),a.e(20)]).then(a.bind(a,6220)),{AdsWortalNative:i}=yield Promise.all([a.e(666),a.e(20)]).then(a.bind(a,8884));this._core=new e(new l),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new c,this.iap=new s,this.leaderboard=new _,this.notifications=new m,this.player=new C(new y.a),this.session=new I(new T,new P),this.stats=new p,this.tournament=new f;break}case"yandex":{const{CoreYandex:e}=yield Promise.all([a.e(666),a.e(656)]).then(a.bind(a,2974)),{AdsYandex:i}=yield Promise.all([a.e(666),a.e(656)]).then(a.bind(a,9670)),{IAPYandex:n}=yield Promise.all([a.e(666),a.e(656)]).then(a.bind(a,9446)),{LeaderboardYandex:s}=yield Promise.all([a.e(666),a.e(656)]).then(a.bind(a,368)),{PlayerYandex:d}=yield Promise.all([a.e(666),a.e(656)]).then(a.bind(a,634));this._core=new e(new l),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new c,this.iap=new n,this.leaderboard=new s,this.notifications=new m,this.player=new d(new b.R),this.session=new I(new T,new P),this.stats=new p,this.tournament=new f;break}case"gmo":{const{CoreGMO:e}=yield Promise.all([a.e(666),a.e(294)]).then(a.bind(a,3706)),{AuthGMO:i}=yield Promise.all([a.e(666),a.e(294)]).then(a.bind(a,5694)),{AdsDisabled:n}=yield Promise.all([a.e(666),a.e(294)]).then(a.bind(a,9875)),{PlayerGMO:s}=yield Promise.all([a.e(666),a.e(294)]).then(a.bind(a,4382)),{IAPGMO:l}=yield Promise.all([a.e(666),a.e(294)]).then(a.bind(a,2914));this._core=new e(new i),this.achievements=new o,this.ads=new n(new r),this.analytics=new t,this.context=new c,this.iap=new l,this.leaderboard=new _,this.notifications=new m,this.player=new s(new v.r),this.session=new I(new T,new P),this.stats=new p,this.tournament=new f;break}case"kantangame":{const{CoreKantanGame:e}=yield Promise.all([a.e(666),a.e(286)]).then(a.bind(a,5352)),{AdsKantanGame:i}=yield Promise.all([a.e(666),a.e(286)]).then(a.bind(a,9152)),{PlayerKantanGame:n}=yield Promise.all([a.e(666),a.e(286)]).then(a.bind(a,4108)),{SessionKantanGame:s}=yield Promise.all([a.e(666),a.e(286)]).then(a.bind(a,4740)),{StatsKantanGame:d}=yield Promise.all([a.e(666),a.e(286)]).then(a.bind(a,3274));this._core=new e(new l),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new c,this.iap=new u,this.leaderboard=new _,this.notifications=new m,this.player=new n(new D),this.session=new s(new T,new P),this.stats=new d,this.tournament=new f;break}case"mixi":{const{CoreMixi:e}=yield Promise.all([a.e(666),a.e(64)]).then(a.bind(a,7150)),{AdsDisabled:i}=yield Promise.all([a.e(666),a.e(64)]).then(a.bind(a,9875)),{PlayerMixi:n}=yield Promise.all([a.e(666),a.e(64)]).then(a.bind(a,7946)),{IAPMixi:s}=yield Promise.all([a.e(666),a.e(64)]).then(a.bind(a,8502)),{SessionMixi:d}=yield Promise.all([a.e(666),a.e(64)]).then(a.bind(a,5474));this._core=new e(new l),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new c,this.iap=new s,this.leaderboard=new _,this.notifications=new m,this.player=new n(new L),this.session=new d(new T,new P),this.stats=new p,this.tournament=new f;break}case"tsutaya":{const{CoreTsutaya:e}=yield Promise.all([a.e(666),a.e(874)]).then(a.bind(a,6866)),{AdsDisabled:i}=yield Promise.all([a.e(666),a.e(874)]).then(a.bind(a,9875)),{PlayerTsutaya:n}=yield Promise.all([a.e(666),a.e(874)]).then(a.bind(a,134)),{IAPTsutaya:s}=yield Promise.all([a.e(666),a.e(874)]).then(a.bind(a,4170));this._core=new e(new l),this.achievements=new o,this.ads=new i(new r),this.analytics=new t,this.context=new c,this.iap=new s,this.leaderboard=new _,this.notifications=new m,this.player=new n(new x),this.session=new I(new T,new P),this.stats=new p,this.tournament=new f;break}case"debug":{const{CoreDebug:e}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,1204)),{AchievementsDebug:t}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,1708)),{AdsDebug:n}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,9036)),{ContextDebug:s}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,3786)),{IAPDebug:o}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,6828)),{LeaderboardDebug:r}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,1950)),{NotificationsDebug:c}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,7552)),{PlayerDebug:h}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,1952)),{SessionDebug:u}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,3176)),{StatsDebug:_}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,698)),{TournamentDebug:g}=yield Promise.all([a.e(666),a.e(40)]).then(a.bind(a,5752));this._core=new e(new l),this.achievements=new t,this.ads=new n(new d),this.analytics=new i,this.context=new s,this.iap=new o,this.leaderboard=new r,this.notifications=new c,this.player=new h(new y.a),this.session=new u(new T,new P),this.stats=new _,this.tournament=new g;break}default:return Promise.reject((0,n.h4)(`Unsupported platform: ${e}`,"_loadCoreAsync"))}}))}};window.Wortal=U;const F={platform:function(){if((0,u.Ez)("qa"))return window.wortalGameID="debug","debug";const e=window.location.host;for(const t of Object.keys(i.A9))if(i.A9[t].some((t=>e.includes(t))))return"wortal"===t?z():t;return window.wortalGameID="debug","debug"}(),debugMode:function(){const e=document.currentScript;return"true"===(null==e?void 0:e.getAttribute("data-debug-mode"))}()};function z(){const e="mixi.jp"==(0,u.Ez)("oauth_consumer_key");return(0,u.Ez)("telegram_wortal")?"telegram-wortal":(0,u.Ez)("telegram")?"telegram":(0,u.Ez)("wortal_native")?"wortal-native":(0,u.Ez)("telegram_bot")?"wortal":(0,u.Ez)("viber")?"viber":(0,u.Ez)("gmo")?"gmo":(0,u.Ez)("mixi")||e?"mixi":(0,u.Ez)("tsutaya")?"tsutaya":"wortal"}U._loadCoreAsync(F).catch((e=>{console.error("SDK failed to initialize.",e)}));const M=U},9745:(e,t,a)=>{a.d(t,{u:()=>l});var i=a(6885),n=a(5894),s=a(5273),o=a(5026),r=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class l extends o.a{constructor(e){super(),this._data.id=(null==e?void 0:e.username)||(0,s.lk)(),this._data.name=(null==e?void 0:e.username)||"Player",this._data.photo=(null==e?void 0:e.profilePictureUrl)||"https://images.crazygames.com/userportal/avatars/4.png"}initialize(){return r(this,void 0,void 0,(function*(){let e=null;try{e=yield this._initializeCrazyGamesPlayer()}catch(e){n.default._log.exception("Error initializing CrazyGames player: ",e)}this._data.id=(null==e?void 0:e.username)||(0,s.lk)(),this._data.name=(null==e?void 0:e.username)||"Player",this._data.photo=(null==e?void 0:e.profilePictureUrl)||"https://images.crazygames.com/userportal/avatars/4.png",n.default._log.debug("Player initialized: ",this._data)}))}_initializeCrazyGamesPlayer(){return r(this,void 0,void 0,(function*(){let e=!1;const t={username:"Player",profilePictureUrl:"https://images.crazygames.com/userportal/avatars/4.png"};void 0===n.default._internalPlatformSDK&&(yield(0,s.N_)((()=>void 0!==n.default._internalPlatformSDK),"Waiting for CrazyGames SDK to load..."));try{e=yield this._checkIsUserAPIAvailable()}catch(e){return n.default._log.exception(`Error checking if user API is available: ${e.message}`),t}if(!e)return t;try{return yield this._fetchCrazyGamesPlayer()}catch(e){return n.default._log.exception(`Error fetching CrazyGames player: ${e.message}`),t}}))}_checkIsUserAPIAvailable(){return r(this,void 0,void 0,(function*(){try{return yield n.default._internalPlatformSDK.user.isUserAccountAvailable}catch(e){return n.default._log.exception(`Error checking if user API is available: ${e.message}`),!1}}))}_fetchCrazyGamesPlayer(){return r(this,void 0,void 0,(function*(){try{const e=yield n.default._internalPlatformSDK.user.getUser();return n.default._log.debug("CrazyGames player fetched:",e),null!==e&&(n.default._internalAuth.isLoggedIn=!0),e}catch(e){return Promise.reject((0,i.v0)(e,"getUser"))}}))}}},258:(e,t,a)=>{a.d(t,{r:()=>r});var i=a(5894),n=a(5273),s=a(5026),o=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class r extends s.a{constructor(e){super();let t=localStorage.getItem("gmo_generated_player_id");t||(t=(0,n.lk)(),localStorage.setItem("gmo_generated_player_id",t)),this._data.id=(null==e?void 0:e.id)||t,this._data.name=(null==e?void 0:e.displayName)||"Player",this._data.photo=(null==e?void 0:e.thumbnailUrl)||"https://storage.googleapis.com/html5gameportal.com/images/avatar.jpg"}initialize(){return o(this,void 0,void 0,(function*(){return i.default._log.debug("Player initialized: ",this._data),i.default._log.debug("Player initialized: ",this._data),Promise.resolve(void 0)}))}}},5026:(e,t,a)=>{a.d(t,{a:()=>o});var i=a(5894),n=a(5273),s=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class o{constructor(){this._data={id:"",name:"",photo:"",isFirstPlay:!1,daysSinceFirstPlay:0}}initialize(){return s(this,void 0,void 0,(function*(){return this._data.id=(0,n.lk)(),this._data.name="Player",this._data.photo="https://storage.googleapis.com/html5gameportal.com/images/avatar.jpg",this._data.isFirstPlay=!1,i.default._log.debug("Player initialized: ",this._data),Promise.resolve()}))}get id(){return this._data.id}get name(){return this._data.name}get photo(){return this._data.photo}get isFirstPlay(){return this._data.isFirstPlay}get daysSinceFirstPlay(){return this._data.daysSinceFirstPlay}get asid(){return this._data.asid}}},7426:(e,t,a)=>{a.d(t,{F:()=>r});var i=a(5894),n=a(5273),s=a(5026),o=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class r extends s.a{constructor(e){super();let t=localStorage.getItem("wortal_generated_player_id");t||(t=(0,n.lk)(),localStorage.setItem("wortal_generated_player_id",t)),this._data.id=(null==e?void 0:e.id)||t,this._data.name=(null==e?void 0:e.name)||"Player",this._data.photo=(null==e?void 0:e.picture)||"https://storage.googleapis.com/html5gameportal.com/images/avatar.jpg"}initialize(){return o(this,void 0,void 0,(function*(){return i.default._log.debug("Player initialized: ",this._data),this._data.isFirstPlay=this._isWortalFirstPlay(),i.default._log.debug("Player initialized: ",this._data),Promise.resolve(void 0)}))}_isWortalFirstPlay(){const e=this._getCookie(i.default.session._internalSession.gameID);return""!==e?(this._data.daysSinceFirstPlay=this._getTimeFromCookieCreation(e),!1):(this._setCookie(i.default.session._internalSession.gameID),!0)}_getCookie(e){var t;const a=("; "+document.cookie).split("; wortal-"+e+"=");return 2===a.length&&(null===(t=a.pop())||void 0===t?void 0:t.split(";").shift())||""}_setCookie(e){const t="wortal-"+e,a=(new Date).toISOString().slice(0,10),i=new Date;i.setTime(i.getTime()+31536e6),document.cookie=t+"="+a+"; expires="+i.toUTCString()+"; path=/"}_getTimeFromCookieCreation(e){const t=+e.substring(0,4),a=+e.substring(5,7)-1,i=+e.substring(8,10),n=Date.UTC(t,a,i),s=Date.now()-n;return Math.round(s/1e3/60/60/24)}}},7190:(e,t,a)=>{a.d(t,{R:()=>l});var i=a(6885),n=a(5894),s=a(5273),o=a(5026),r=function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((i=i.apply(e,t||[])).next())}))};class l extends o.a{constructor(){super()}get playerObject(){return this._playerObject}initialize(){return r(this,void 0,void 0,(function*(){try{yield this._setPlayerObject(),this._data={id:this._playerObject.getUniqueID(),name:this._playerObject.getName(),photo:this._playerObject.getPhoto("medium"),isFirstPlay:!1,daysSinceFirstPlay:0}}catch(e){throw(0,i.U)(e,"initializeImpl")}}))}_setPlayerObject(){return r(this,void 0,void 0,(function*(){if(void 0===this._playerObject){void 0===n.default._internalPlatformSDK&&(yield(0,s.N_)((()=>void 0!==n.default._internalPlatformSDK),"Waiting for Wortal._internalPlatformSDK to be defined."));try{this._playerObject=yield n.default._internalPlatformSDK.getPlayer()}catch(e){return Promise.reject((0,i.U)(e,"_setPlayerObject"))}}}))}}},3423:(e,t,a)=>{function i(e){return"string"==typeof e&&""!==e}function n(e){return"number"==typeof e&&!isNaN(e)}function s(e){return["preroll","start","pause","next","browse","reward"].includes(e)}function o(e){return"string"==typeof e&&""!==e||"object"==typeof e&&"string"==typeof e.default&&""!==e.default}function r(e){return!("string"!=typeof e||""===e||!e.startsWith("data:"))}function l(e){return"string"==typeof e.productID&&""!==e.productID}function d(e){return["facebook","twitter"].includes(e)}function c(e){return["password","email","phone","social"].includes(e)}function h(e){if(!i(e))return!1;if(e.length>255)return!1;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function u(e){return!!i(e)&&!(e.length<6||e.length>100)}function _(e){if(!i(e))return!1;return/^\+\d{1,3}[-.\s]?\(?\d+\)?([-.\s]?\d+)*$/.test(e)}a.d(t,{B9:()=>h,Cu:()=>s,GX:()=>o,GZ:()=>r,Q2:()=>c,Qh:()=>i,c$:()=>d,g0:()=>_,gf:()=>n,sl:()=>u,u2:()=>l})},5273:(e,t,a)=>{a.d(t,{A8:()=>S,CU:()=>c,Ez:()=>u,K3:()=>_,N:()=>I,N_:()=>h,Pv:()=>f,S8:()=>E,b6:()=>y,bP:()=>d,e1:()=>l,e8:()=>C,hX:()=>o,iZ:()=>g,kC:()=>w,kb:()=>r,lk:()=>m,p7:()=>T,qe:()=>p,tr:()=>b});var i=a(5894),n=a(6885),s=a(3423);const o=[],r=[],l=[],d=[];function c(e,t){const a={type:"wortal-sdk-event",name:e,payload:t};if(window.location.host.includes("wortal")||window.location.host.includes("localhost"))try{parent.postMessage(a,"*")}catch(e){console.warn("WortalEvent: Failed to send event.",e)}}function h(e,t=""){return new Promise((a=>{const n=()=>{e()?a():((0,s.Qh)(t)&&i.default._log.debug(t),setTimeout(n,100))};n()}))}function u(e){e=e.replace(/[\[\]]/g,"\\$&");const t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(window.location.href);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function _(e,t){t=t.replace(/[\[\]]/g,"\\$&");const a=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function g(){const e={},t=window.location.search.slice(1).split("&");for(const a of t){const[t,i]=a.split("=");e[t]=i}return e}function m(){let e="";try{e=crypto.randomUUID()}catch(e){i.default._log.exception(`Failed to generate UUID because ${e}`)}return(0,s.Qh)(e)?e:"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16)))}function p(){const e=i.default.session.getPlatform();"loading"===document.readyState?"wortal"!==e&&"gd"!==e||document.addEventListener("DOMContentLoaded",A):"wortal"!==e&&"gd"!==e||A()}function A(){if(i.default.ads._internalAdConfig.hasPrerollShown||i.default.ads._internalAdConfig.isAdBlocked)return;const e=document.createElement("div");e.id="loading-cover",e.style.cssText="background: #000000; width: 100%; height: 100%; position: fixed; z-index: 100;",document.body.prepend(e)}function S(){document.getElementById("loading-cover")&&(document.getElementById("loading-cover").style.display="none")}function y(e){const t=document.createElement("div");t.id="black-cover",t.style.cssText="\n        background: #000;\n        width: 100vw;\n        height: 100vh;\n        position: fixed;\n        top: 0;\n        left: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 110;\n    ";const a=document.createElement("p");a.innerText=e,a.style.cssText="\n        color: white;\n        font-size: 24px;\n        font-weight: bold;\n        text-align: center;\n    ",t.appendChild(a),document.body.prepend(t)}function f(){document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(o.forEach((e=>{e()})),i.default.session._internalSession.isAudioEnabled=!1),"visible"===document.visibilityState&&(r.forEach((e=>{e()})),i.default.session._internalSession.isAudioEnabled=!0)}))}function E(e,t){if("function"!=typeof t)throw(0,n.CH)(void 0,"addExternalCallback()");void 0!==i.default.session._internalSession.externalCallbacks?i.default.session._internalSession.externalCallbacks[e]=t:i.default._log.exception("externalCallbacks is undefined. This is a fatal error that should have been caught during initialization.")}function w(e){if(void 0!==i.default.session._internalSession.externalCallbacks){const t=i.default.session._internalSession.externalCallbacks[e];void 0!==t?(i.default._log.debug(`External event triggered. Event: ${e}`),t()):i.default._log.debug(`External event triggered, but no callback is defined for this event. Event: ${e}`)}else i.default._log.exception("External event triggered, but externalCallbacks is undefined. This is a fatal error that should have been caught during initialization.")}function b(e,t,a=5e3){return new Promise(((i,n)=>{let s=null;const o=a=>{if(a.data&&a.data.action===e)try{const e=t(a);void 0!==e&&(i(e),r())}catch(e){n(e),r()}},r=()=>{window.removeEventListener("message",o),s&&clearTimeout(s)};window.addEventListener("message",o),s=window.setTimeout((()=>{r(),n(new Error(`Timeout: '${e}' event not triggered within the timeout range.`))}),a)}))}function T(e,t=5e3){return new Promise(((a,n)=>{let s=null;const o=({data:t})=>{const n=(null==t?void 0:t.playdeck)||(null==t?void 0:t.wortal);(null==n?void 0:n.method)===e&&(i.default._log.debug(`Telegram event callback. Event: ${e}`,null==n?void 0:n.value),window.removeEventListener("message",o),clearTimeout(s),a(null==n?void 0:n.value))};window.addEventListener("message",o),s=setTimeout((()=>{window.removeEventListener("message",o),n(new Error(`Timeout: '${e}' event not triggered within the timeout range.`))}),t)}))}function C(){return/android/i.test(navigator.userAgent)?"ANDROID":/iphone/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent)?"IOS":"DESKTOP"}function I(e,t,a){return Math.min(Math.max(e,t),a)}function P(){return u("shareUrl")}window.shareGame=function(e,t){if(!(0,s.c$)(e))throw(0,n.CH)(void 0,"shareGame()");switch(e){case"facebook":return function(e){const t=`https://www.facebook.com/sharer/sharer.php?u=${P()}&quote=${e}`;window.open(t,"_blank")}(t);case"twitter":return function(e){const t=P(),a="https://twitter.com/intent/tweet";window.open(`${a}?url=${t}&text=${e}`,"_blank")}(t)}}}},i={};function n(e){var t=i[e];if(void 0!==t)return t.exports;var s=i[e]={exports:{}};return a[e](s,s.exports,n),s.exports}n.m=a,n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>({20:"wortal-native",40:"debug",64:"mixi",82:"wortal-shared",88:"gamemonetize",98:"gd",240:"gamesnacks",272:"poki",286:"kantangame",294:"gmo",308:"telegram-wortal",331:"facebook",410:"telegram",596:"gamepix",639:"crazygames",656:"yandex",666:"wortal-common",874:"tsutaya",904:"wortal",945:"addictinggames"}[e]+".js"),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="Wortal:",n.l=(a,i,s,o)=>{if(e[a])e[a].push(i);else{var r,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==a||h.getAttribute("data-webpack")==t+s){r=h;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+s),r.src=a),e[a]=[i];var u=(t,i)=>{r.onerror=r.onload=null,clearTimeout(_);var n=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(i))),t)return t(i)},_=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),l&&document.head.appendChild(r)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="",(()=>{var e={249:0};n.f.j=(t,a)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var s=new Promise(((a,n)=>i=e[t]=[a,n]));a.push(i[2]=s);var o=n.p+n.u(t),r=new Error;n.l(o,(a=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",r.name="ChunkLoadError",r.type=s,r.request=o,i[1](r)}}),"chunk-"+t,t)}};var t=(t,a)=>{var i,s,[o,r,l]=a,d=0;if(o.some((t=>0!==e[t]))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)l(n)}for(t&&t(a);d<o.length;d++)s=o[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},a=self.webpackChunkWortal=self.webpackChunkWortal||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n(5894);return s=s.default})()));