import{i as I,A as x,v as b,a4 as M,by as P,o as c,c as i,_ as k,j as O,bz as K,u as R,a as $,b1 as H,I as V,bs as z,d as o,e as h,n as g,a2 as U,bA as D,bB as j,F as S,w as F,E as W,h as E,L as q,bC as Q,R as X,b2 as N,a1 as Y,ah as J,k as C,a9 as Z,bD as w,r as ee,t as f,G as B,g as se,p as te,q as ae,l as G}from"./index-BszMCtG6.js";const ne=I({__name:"AdaptiveBanner",props:{checkpointAds:{type:Array,default:[]},placement:{type:String,default:"none"}},setup(m){const p=m,v=x(),t=b(!1),a=b(null),_={"728x90":{width:"728px",height:"90px","min-width":"728px","min-height":"90px",mobile:!1},"320x50":{width:"320px",height:"50px","min-width":"320px","min-height":"50px",mobile:!0},"300x250":{width:"300px",height:"250px","min-width":"300px","min-height":"250px",mobile:!1}},u=()=>{gameanalytics.GameAnalytics.addAdEvent(gameanalytics.EGAAdAction.Clicked,gameanalytics.GAAdType.Banner,"poki",p.placement)},d=()=>{try{const e=window.innerWidth,y=window.innerHeight,n=l=>l[1][0]<e&&l[1][1]<y&&(v.isMobileOrTablet?_[l[0]].mobile:!0);p.checkpointAds.some(l=>{const s=n(l);if(s&&l[0]===t.value)return!0;if(s&&l[0]!==t.value){t.value&&PokiSDK.destroyAd(a.value);const r=_[l[0]];return a.value.style.width=r.width,a.value.style.height=r.height,PokiSDK.displayAd(a.value,l[0]),gameanalytics.GameAnalytics.addAdEvent(gameanalytics.EGAAdAction.Show,gameanalytics.EGAAdType.Banner,"poki",p.placement),t.value=l[0],!0}}),p.checkpointAds.every(l=>!n(l))&&t.value&&(PokiSDK.destroyAd(a.value,t.value),t.value=!1)}catch(e){console.error("[AdaptiveBanner] Error while setting ad",e)}};return M(()=>{PokiSDK&&(d(),window.addEventListener("resize",d))}),P(()=>{removeEventListener("resize",d),PokiSDK&&t.value&&PokiSDK.destroyAd(a.value,t.value)}),(e,y)=>(c(),i("div",{onClick:u,ref_key:"adContainer",ref:a,class:"adaptive-banner"},null,512))}}),he=k(ne,[["__scopeId","data-v-2cbfb770"]]),oe=["placeholder","maxlength"],le=I({__name:"ChatInput",setup(m){const{t:p}=O(),v=x(),t=K(),a=R(),_=$(),u=H(),d=b(null),e=b(""),y=s=>{e.value.length<=D?e.value=s.target.value:e.value=e.value.substring(0,e.value.length-1)},n=()=>{if(e.value=e.value.trim(),e.value.length){const s=e.value.charAt(0)==="/"&&u.server,r=u.server&&(Q.includes(u.server.gameWorld.player.name)||X);s&&r?u.server.sendMessage(N.ADMIN_COMMAND,e.value.substring(1)):u.server?u.server.sendMessage(N.CHAT,e.value):Y().room.send(J.CHAT,e.value)}e.value=""},l=()=>{_.playInterfaceSoundByName("click"),e.value.length>0&&n(),t.isChatOpen?(setTimeout(()=>t.isChatOpen=!1,1),d.value.blur()):(t.isChatOpen=!0,d.value.focus())};return(s,r)=>{const T=q;return c(),i("div",{class:g(["input-wrapper",[o(v).isMobileOrTablet?"mobile-input":""]])},[V(h("input",{type:"text",class:g(["input",{"active-input":!o(t).isChatOpen}]),id:"chatGame",ref_key:"chatGame",ref:d,placeholder:o(p)("game-layouts.chat.placeholder"),onInput:r[0]||(r[0]=A=>y(A)),autocomplete:"off","onUpdate:modelValue":r[1]||(r[1]=A=>U(e)?e.value=A:null),maxlength:o(D),onKeyup:j(l,["enter"]),tabindex:"-1"},null,42,oe),[[z,o(e),void 0,{trim:!0}]]),o(t).isChatOpen?E("",!0):(c(),i("div",{key:0,onClick:l,class:g([{login:!o(a).user},"chat-icon-cont"])},[o(a).user?(c(),W(T,{key:1,name:"chat",class:"chat-icon"})):(c(),i(S,{key:0},[F("LOGIN REQUIRED")],64))],2)),o(a).user?(c(),i("div",{key:1,onClick:l,onMouseenter:r[2]||(r[2]=A=>o(_).playInterfaceSoundByName("hover")),class:"enter"}," Enter ",32)):E("",!0)],2)}}}),re=k(le,[["__scopeId","data-v-7a288767"]]),L=m=>(te("data-v-544dc118"),m=m(),ae(),m),ce={class:"label"},ie=L(()=>h("span",{class:"hr"},null,-1)),ue=L(()=>h("span",{class:"hr"},null,-1)),pe={class:"text"},de=I({__name:"Messages",setup(m){const p=x(),v=K(),t=C(()=>v.messages),a=b(null),{t:_}=O(),u=()=>{a.value&&(a.value.scrollTop=a.value.scrollHeight)};M(u);let d;Z(()=>v.messages,()=>{d=setTimeout(u,60)}),M(()=>{clearTimeout(d)});const e=C(()=>n=>n.type===w.I18N&&typeof n.msg=="object"?_(n.msg.msg,n.msg.values||{}):typeof n.msg=="string"?n.msg:String(n.msg)),y=C(()=>n=>n.type===w.I18N&&typeof n.msg=="object"&&n.msg.color?{color:n.msg.color}:{});return(n,l)=>(c(),i("div",{class:g(["messages",[o(p).isMobileOrTablet?"mobile":""]]),ref_key:"messagesEl",ref:a},[(c(!0),i(S,null,ee(o(t),(s,r)=>(c(),i("div",{key:r,class:"message"},[s.type===o(w).PLAYER?(c(),i(S,{key:0},[s.label?(c(),i(S,{key:0},[h("span",ce,f(s.label),1),ie],64)):E("",!0),h("span",{style:B({color:o(se)(s.lvl||0).color}),class:"level"},f(s.lvl||0),5),ue,h("span",{class:g(["nickname",[s.team]])},f(s.name)+": ",3),h("span",pe,f(o(e)(s)),1)],64)):(c(),i("span",{key:1,class:g(["text",[`color-${s.type}`]]),style:B(o(y)(s))},f(o(e)(s)),7))]))),128))],2))}}),_e=k(de,[["__scopeId","data-v-544dc118"]]),me={__name:"Chat",setup(m){const p=x();return(v,t)=>{const a=_e,_=re;return c(),i("div",{class:g(["chat",{mobile:o(p).isMobileOrTablet}])},[G(a),G(_)],2)}}},ge=k(me,[["__scopeId","data-v-a3dcebc8"]]);export{he as _,ge as a};
